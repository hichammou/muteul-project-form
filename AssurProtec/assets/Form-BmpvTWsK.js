function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/browser-CjDogl_J.js","assets/index-B2i7hzob.js","assets/index-CNhsVPzH.css","assets/InsurentInfo-CYEhGivt.js","assets/form-C3hf3rYw.js","assets/input-BkNwWRwe.js","assets/radio-group-CGX76WjE.js","assets/select-DxvnnKga.js","assets/InsurentPartnerProfile-DuhqSn2D.js","assets/profission-regim-BwU0ta_C.js","assets/InsurentProfile-BPE18hWv.js","assets/InsuranceMemebers-DtyCijto.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{c as yi,r as Z,_ as xe,a as Oe,j as M}from"./index-B2i7hzob.js";/**
 * @license lucide-react v0.360.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=yi("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var Lt=r=>r.type==="checkbox",at=r=>r instanceof Date,ie=r=>r==null;const jr=r=>typeof r=="object";var X=r=>!ie(r)&&!Array.isArray(r)&&jr(r)&&!at(r),Cr=r=>X(r)&&r.target?Lt(r.target)?r.target.checked:r.target.value:r,vi=r=>r.substring(0,r.search(/\.\d+(\.|$)/))||r,Rr=(r,e)=>r.has(vi(e)),bi=r=>{const e=r.constructor&&r.constructor.prototype;return X(e)&&e.hasOwnProperty("isPrototypeOf")},Ls=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ae(r){let e;const t=Array.isArray(r);if(r instanceof Date)e=new Date(r);else if(r instanceof Set)e=new Set(r);else if(!(Ls&&(r instanceof Blob||r instanceof FileList))&&(t||X(r)))if(e=t?[]:{},!t&&!bi(r))e=r;else for(const s in r)r.hasOwnProperty(s)&&(e[s]=ae(r[s]));else return r;return e}var Nt=r=>Array.isArray(r)?r.filter(Boolean):[],G=r=>r===void 0,v=(r,e,t)=>{if(!e||!X(r))return t;const s=Nt(e.split(/[,[\].]+?/)).reduce((i,n)=>ie(i)?i:i[n],r);return G(s)||s===r?G(r[e])?t:r[e]:s},ge=r=>typeof r=="boolean";const Kt={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ye={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ee={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Pr=Z.createContext(null),Ns=()=>Z.useContext(Pr),Io=r=>{const{children:e,...t}=r;return Z.createElement(Pr.Provider,{value:t},e)};var $r=(r,e,t,s=!0)=>{const i={defaultValues:e._defaultValues};for(const n in r)Object.defineProperty(i,n,{get:()=>{const a=n;return e._proxyFormState[a]!==ye.all&&(e._proxyFormState[a]=!s||ye.all),t&&(t[a]=!0),r[a]}});return i},he=r=>X(r)&&!Object.keys(r).length,Ir=(r,e,t,s)=>{t(r);const{name:i,...n}=r;return he(n)||Object.keys(n).length>=Object.keys(e).length||Object.keys(n).find(a=>e[a]===(!s||ye.all))},Ht=r=>Array.isArray(r)?r:[r],Lr=(r,e,t)=>!r||!e||r===e||Ht(r).some(s=>s&&(t?s===e:s.startsWith(e)||e.startsWith(s)));function Ds(r){const e=Z.useRef(r);e.current=r,Z.useEffect(()=>{const t=!r.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{t&&t.unsubscribe()}},[r.disabled])}function wi(r){const e=Ns(),{control:t=e.control,disabled:s,name:i,exact:n}=r||{},[a,o]=Z.useState(t._formState),c=Z.useRef(!0),l=Z.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=Z.useRef(i);return u.current=i,Ds({disabled:s,next:h=>c.current&&Lr(u.current,h.name,n)&&Ir(h,l.current,t._updateFormState)&&o({...t._formState,...h}),subject:t._subjects.state}),Z.useEffect(()=>(c.current=!0,l.current.isValid&&t._updateValid(!0),()=>{c.current=!1}),[t]),$r(a,t,l.current,!1)}var ke=r=>typeof r=="string",Nr=(r,e,t,s,i)=>ke(r)?(s&&e.watch.add(r),v(t,r,i)):Array.isArray(r)?r.map(n=>(s&&e.watch.add(n),v(t,n))):(s&&(e.watchAll=!0),t);function ki(r){const e=Ns(),{control:t=e.control,name:s,defaultValue:i,disabled:n,exact:a}=r||{},o=Z.useRef(s);o.current=s,Ds({disabled:n,subject:t._subjects.values,next:u=>{Lr(o.current,u.name,a)&&l(ae(Nr(o.current,t._names,u.values||t._formValues,!1,i)))}});const[c,l]=Z.useState(t._getWatch(s,i));return Z.useEffect(()=>t._removeUnmounted()),c}var Vs=r=>/^\w*$/.test(r),Dr=r=>Nt(r.replace(/["|']|\]/g,"").split(/\.|\[/)),U=(r,e,t)=>{let s=-1;const i=Vs(e)?[e]:Dr(e),n=i.length,a=n-1;for(;++s<n;){const o=i[s];let c=t;if(s!==a){const l=r[o];c=X(l)||Array.isArray(l)?l:isNaN(+i[s+1])?{}:[]}r[o]=c,r=r[o]}return r};function xi(r){const e=Ns(),{name:t,disabled:s,control:i=e.control,shouldUnregister:n}=r,a=Rr(i._names.array,t),o=ki({control:i,name:t,defaultValue:v(i._formValues,t,v(i._defaultValues,t,r.defaultValue)),exact:!0}),c=wi({control:i,name:t}),l=Z.useRef(i.register(t,{...r.rules,value:o,...ge(r.disabled)?{disabled:r.disabled}:{}}));return Z.useEffect(()=>{const u=i._options.shouldUnregister||n,h=(m,_)=>{const S=v(i._fields,m);S&&(S._f.mount=_)};if(h(t,!0),u){const m=ae(v(i._options.defaultValues,t));U(i._defaultValues,t,m),G(v(i._formValues,t))&&U(i._formValues,t,m)}return()=>{(a?u&&!i._state.action:u)?i.unregister(t):h(t,!1)}},[t,i,a,n]),Z.useEffect(()=>{v(i._fields,t)&&i._updateDisabledField({disabled:s,fields:i._fields,name:t,value:v(i._fields,t)._f.value})},[s,t,i]),{field:{name:t,value:o,...ge(s)||c.disabled?{disabled:c.disabled||s}:{},onChange:Z.useCallback(u=>l.current.onChange({target:{value:Cr(u),name:t},type:Kt.CHANGE}),[t]),onBlur:Z.useCallback(()=>l.current.onBlur({target:{value:v(i._formValues,t),name:t},type:Kt.BLUR}),[t,i]),ref:u=>{const h=v(i._fields,t);h&&u&&(h._f.ref={focus:()=>u.focus(),select:()=>u.select(),setCustomValidity:m=>u.setCustomValidity(m),reportValidity:()=>u.reportValidity()})}},formState:c,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!v(c.errors,t)},isDirty:{enumerable:!0,get:()=>!!v(c.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!v(c.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!v(c.validatingFields,t)},error:{enumerable:!0,get:()=>v(c.errors,t)}})}}const Lo=r=>r.render(xi(r));var Vr=(r,e,t,s,i)=>e?{...t[r],types:{...t[r]&&t[r].types?t[r].types:{},[s]:i||!0}}:{},rr=r=>({isOnSubmit:!r||r===ye.onSubmit,isOnBlur:r===ye.onBlur,isOnChange:r===ye.onChange,isOnAll:r===ye.all,isOnTouch:r===ye.onTouched}),ir=(r,e,t)=>!t&&(e.watchAll||e.watch.has(r)||[...e.watch].some(s=>r.startsWith(s)&&/^\.\w+/.test(r.slice(s.length))));const vt=(r,e,t,s)=>{for(const i of t||Object.keys(r)){const n=v(r,i);if(n){const{_f:a,...o}=n;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],i)&&!s)break;if(a.ref&&e(a.ref,a.name)&&!s)break;vt(o,e)}else X(o)&&vt(o,e)}}};var Si=(r,e,t)=>{const s=Nt(v(r,t));return U(s,"root",e[t]),U(r,t,s),r},Us=r=>r.type==="file",$e=r=>typeof r=="function",Yt=r=>{if(!Ls)return!1;const e=r?r.ownerDocument:0;return r instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Wt=r=>ke(r),Fs=r=>r.type==="radio",Xt=r=>r instanceof RegExp;const nr={value:!1,isValid:!1},ar={value:!0,isValid:!0};var Ur=r=>{if(Array.isArray(r)){if(r.length>1){const e=r.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return r[0].checked&&!r[0].disabled?r[0].attributes&&!G(r[0].attributes.value)?G(r[0].value)||r[0].value===""?ar:{value:r[0].value,isValid:!0}:ar:nr}return nr};const or={isValid:!1,value:null};var Fr=r=>Array.isArray(r)?r.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,or):or;function cr(r,e,t="validate"){if(Wt(r)||Array.isArray(r)&&r.every(Wt)||ge(r)&&!r)return{type:t,message:Wt(r)?r:"",ref:e}}var Ye=r=>X(r)&&!Xt(r)?r:{value:r,message:""},lr=async(r,e,t,s,i)=>{const{ref:n,refs:a,required:o,maxLength:c,minLength:l,min:u,max:h,pattern:m,validate:_,name:S,valueAsNumber:A,mount:$,disabled:J}=r._f,R=v(e,S);if(!$||J)return{};const K=a?a[0]:n,B=I=>{s&&K.reportValidity&&(K.setCustomValidity(ge(I)?"":I||""),K.reportValidity())},q={},We=Fs(n),Ut=Lt(n),De=We||Ut,Ge=(A||Us(n))&&G(n.value)&&G(R)||Yt(n)&&n.value===""||R===""||Array.isArray(R)&&!R.length,le=Vr.bind(null,S,t,q),Ft=(I,V,Y,te=Ee.maxLength,fe=Ee.minLength)=>{const ue=I?V:Y;q[S]={type:I?te:fe,message:ue,ref:n,...le(I?te:fe,ue)}};if(i?!Array.isArray(R)||!R.length:o&&(!De&&(Ge||ie(R))||ge(R)&&!R||Ut&&!Ur(a).isValid||We&&!Fr(a).isValid)){const{value:I,message:V}=Wt(o)?{value:!!o,message:o}:Ye(o);if(I&&(q[S]={type:Ee.required,message:V,ref:K,...le(Ee.required,V)},!t))return B(V),q}if(!Ge&&(!ie(u)||!ie(h))){let I,V;const Y=Ye(h),te=Ye(u);if(!ie(R)&&!isNaN(R)){const fe=n.valueAsNumber||R&&+R;ie(Y.value)||(I=fe>Y.value),ie(te.value)||(V=fe<te.value)}else{const fe=n.valueAsDate||new Date(R),ue=mt=>new Date(new Date().toDateString()+" "+mt),ft=n.type=="time",pt=n.type=="week";ke(Y.value)&&R&&(I=ft?ue(R)>ue(Y.value):pt?R>Y.value:fe>new Date(Y.value)),ke(te.value)&&R&&(V=ft?ue(R)<ue(te.value):pt?R<te.value:fe<new Date(te.value))}if((I||V)&&(Ft(!!I,Y.message,te.message,Ee.max,Ee.min),!t))return B(q[S].message),q}if((c||l)&&!Ge&&(ke(R)||i&&Array.isArray(R))){const I=Ye(c),V=Ye(l),Y=!ie(I.value)&&R.length>+I.value,te=!ie(V.value)&&R.length<+V.value;if((Y||te)&&(Ft(Y,I.message,V.message),!t))return B(q[S].message),q}if(m&&!Ge&&ke(R)){const{value:I,message:V}=Ye(m);if(Xt(I)&&!R.match(I)&&(q[S]={type:Ee.pattern,message:V,ref:n,...le(Ee.pattern,V)},!t))return B(V),q}if(_){if($e(_)){const I=await _(R,e),V=cr(I,K);if(V&&(q[S]={...V,...le(Ee.validate,V.message)},!t))return B(V.message),q}else if(X(_)){let I={};for(const V in _){if(!he(I)&&!t)break;const Y=cr(await _[V](R,e),K,V);Y&&(I={...Y,...le(V,Y.message)},B(Y.message),t&&(q[S]=I))}if(!he(I)&&(q[S]={ref:K,...I},!t))return q}}return B(!0),q};function Ti(r,e){const t=e.slice(0,-1).length;let s=0;for(;s<t;)r=G(r)?s++:r[e[s++]];return r}function Ei(r){for(const e in r)if(r.hasOwnProperty(e)&&!G(r[e]))return!1;return!0}function ee(r,e){const t=Array.isArray(e)?e:Vs(e)?[e]:Dr(e),s=t.length===1?r:Ti(r,t),i=t.length-1,n=t[i];return s&&delete s[n],i!==0&&(X(s)&&he(s)||Array.isArray(s)&&Ei(s))&&ee(r,t.slice(0,-1)),r}var ys=()=>{let r=[];return{get observers(){return r},next:i=>{for(const n of r)n.next&&n.next(i)},subscribe:i=>(r.push(i),{unsubscribe:()=>{r=r.filter(n=>n!==i)}}),unsubscribe:()=>{r=[]}}},Qt=r=>ie(r)||!jr(r);function Ze(r,e){if(Qt(r)||Qt(e))return r===e;if(at(r)&&at(e))return r.getTime()===e.getTime();const t=Object.keys(r),s=Object.keys(e);if(t.length!==s.length)return!1;for(const i of t){const n=r[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=e[i];if(at(n)&&at(a)||X(n)&&X(a)||Array.isArray(n)&&Array.isArray(a)?!Ze(n,a):n!==a)return!1}}return!0}var Mr=r=>r.type==="select-multiple",Oi=r=>Fs(r)||Lt(r),_s=r=>Yt(r)&&r.isConnected,Zr=r=>{for(const e in r)if($e(r[e]))return!0;return!1};function es(r,e={}){const t=Array.isArray(r);if(X(r)||t)for(const s in r)Array.isArray(r[s])||X(r[s])&&!Zr(r[s])?(e[s]=Array.isArray(r[s])?[]:{},es(r[s],e[s])):ie(r[s])||(e[s]=!0);return e}function Br(r,e,t){const s=Array.isArray(r);if(X(r)||s)for(const i in r)Array.isArray(r[i])||X(r[i])&&!Zr(r[i])?G(e)||Qt(t[i])?t[i]=Array.isArray(r[i])?es(r[i],[]):{...es(r[i])}:Br(r[i],ie(e)?{}:e[i],t[i]):t[i]=!Ze(r[i],e[i]);return t}var Mt=(r,e)=>Br(r,e,es(e)),zr=(r,{valueAsNumber:e,valueAsDate:t,setValueAs:s})=>G(r)?r:e?r===""?NaN:r&&+r:t&&ke(r)?new Date(r):s?s(r):r;function vs(r){const e=r.ref;if(!(r.refs?r.refs.every(t=>t.disabled):e.disabled))return Us(e)?e.files:Fs(e)?Fr(r.refs).value:Mr(e)?[...e.selectedOptions].map(({value:t})=>t):Lt(e)?Ur(r.refs).value:zr(G(e.value)?r.ref.value:e.value,r)}var Ai=(r,e,t,s)=>{const i={};for(const n of r){const a=v(e,n);a&&U(i,n,a._f)}return{criteriaMode:t,names:[...r],fields:i,shouldUseNativeValidation:s}},gt=r=>G(r)?r:Xt(r)?r.source:X(r)?Xt(r.value)?r.value.source:r.value:r,ji=r=>r.mount&&(r.required||r.min||r.max||r.maxLength||r.minLength||r.pattern||r.validate);function ur(r,e,t){const s=v(r,t);if(s||Vs(t))return{error:s,name:t};const i=t.split(".");for(;i.length;){const n=i.join("."),a=v(e,n),o=v(r,n);if(a&&!Array.isArray(a)&&t!==n)return{name:t};if(o&&o.type)return{name:n,error:o};i.pop()}return{name:t}}var Ci=(r,e,t,s,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||r):(t?s.isOnBlur:i.isOnBlur)?!r:(t?s.isOnChange:i.isOnChange)?r:!0,Ri=(r,e)=>!Nt(v(r,e)).length&&ee(r,e);const Pi={mode:ye.onSubmit,reValidateMode:ye.onChange,shouldFocusError:!0};function $i(r={}){let e={...Pi,...r},t={submitCount:0,isDirty:!1,isLoading:$e(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},i=X(e.defaultValues)||X(e.values)?ae(e.defaultValues||e.values)||{}:{},n=e.shouldUnregister?{}:ae(i),a={action:!1,mount:!1,watch:!1},o={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,l=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:ys(),array:ys(),state:ys()},m=rr(e.mode),_=rr(e.reValidateMode),S=e.criteriaMode===ye.all,A=d=>f=>{clearTimeout(l),l=setTimeout(d,f)},$=async d=>{if(u.isValid||d){const f=e.resolver?he((await De()).errors):await le(s,!0);f!==t.isValid&&h.state.next({isValid:f})}},J=(d,f)=>{(u.isValidating||u.validatingFields)&&((d||Array.from(o.mount)).forEach(p=>p&&U(t.validatingFields,p,!!f)),t.isValidating=Object.values(t.validatingFields).some(p=>p),h.state.next({validatingFields:t.validatingFields,isValidating:t.isValidating}))},R=(d,f=[],p,k,b=!0,y=!0)=>{if(k&&p){if(a.action=!0,y&&Array.isArray(v(s,d))){const T=p(v(s,d),k.argA,k.argB);b&&U(s,d,T)}if(y&&Array.isArray(v(t.errors,d))){const T=p(v(t.errors,d),k.argA,k.argB);b&&U(t.errors,d,T),Ri(t.errors,d)}if(u.touchedFields&&y&&Array.isArray(v(t.touchedFields,d))){const T=p(v(t.touchedFields,d),k.argA,k.argB);b&&U(t.touchedFields,d,T)}u.dirtyFields&&(t.dirtyFields=Mt(i,n)),h.state.next({name:d,isDirty:I(d,f),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else U(n,d,f)},K=(d,f)=>{U(t.errors,d,f),h.state.next({errors:t.errors})},B=d=>{t.errors=d,h.state.next({errors:t.errors,isValid:!1})},q=(d,f,p,k)=>{const b=v(s,d);if(b){const y=v(n,d,G(p)?v(i,d):p);G(y)||k&&k.defaultChecked||f?U(n,d,f?y:vs(b._f)):te(d,y),a.mount&&$()}},We=(d,f,p,k,b)=>{let y=!1,T=!1;const F={name:d},Q=!!(v(s,d)&&v(s,d)._f.disabled);if(!p||k){u.isDirty&&(T=t.isDirty,t.isDirty=F.isDirty=I(),y=T!==F.isDirty);const oe=Q||Ze(v(i,d),f);T=!!(!Q&&v(t.dirtyFields,d)),oe||Q?ee(t.dirtyFields,d):U(t.dirtyFields,d,!0),F.dirtyFields=t.dirtyFields,y=y||u.dirtyFields&&T!==!oe}if(p){const oe=v(t.touchedFields,d);oe||(U(t.touchedFields,d,p),F.touchedFields=t.touchedFields,y=y||u.touchedFields&&oe!==p)}return y&&b&&h.state.next(F),y?F:{}},Ut=(d,f,p,k)=>{const b=v(t.errors,d),y=u.isValid&&ge(f)&&t.isValid!==f;if(r.delayError&&p?(c=A(()=>K(d,p)),c(r.delayError)):(clearTimeout(l),c=null,p?U(t.errors,d,p):ee(t.errors,d)),(p?!Ze(b,p):b)||!he(k)||y){const T={...k,...y&&ge(f)?{isValid:f}:{},errors:t.errors,name:d};t={...t,...T},h.state.next(T)}},De=async d=>{J(d,!0);const f=await e.resolver(n,e.context,Ai(d||o.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return J(d),f},Ge=async d=>{const{errors:f}=await De(d);if(d)for(const p of d){const k=v(f,p);k?U(t.errors,p,k):ee(t.errors,p)}else t.errors=f;return f},le=async(d,f,p={valid:!0})=>{for(const k in d){const b=d[k];if(b){const{_f:y,...T}=b;if(y){const F=o.array.has(y.name);J([k],!0);const Q=await lr(b,n,S,e.shouldUseNativeValidation&&!f,F);if(J([k]),Q[y.name]&&(p.valid=!1,f))break;!f&&(v(Q,y.name)?F?Si(t.errors,Q,y.name):U(t.errors,y.name,Q[y.name]):ee(t.errors,y.name))}T&&await le(T,f,p)}}return p.valid},Ft=()=>{for(const d of o.unMount){const f=v(s,d);f&&(f._f.refs?f._f.refs.every(p=>!_s(p)):!_s(f._f.ref))&&fs(d)}o.unMount=new Set},I=(d,f)=>(d&&f&&U(n,d,f),!Ze(Hs(),i)),V=(d,f,p)=>Nr(d,o,{...a.mount?n:G(f)?i:ke(d)?{[d]:f}:f},p,f),Y=d=>Nt(v(a.mount?n:i,d,r.shouldUnregister?v(i,d,[]):[])),te=(d,f,p={})=>{const k=v(s,d);let b=f;if(k){const y=k._f;y&&(!y.disabled&&U(n,d,zr(f,y)),b=Yt(y.ref)&&ie(f)?"":f,Mr(y.ref)?[...y.ref.options].forEach(T=>T.selected=b.includes(T.value)):y.refs?Lt(y.ref)?y.refs.length>1?y.refs.forEach(T=>(!T.defaultChecked||!T.disabled)&&(T.checked=Array.isArray(b)?!!b.find(F=>F===T.value):b===T.value)):y.refs[0]&&(y.refs[0].checked=!!b):y.refs.forEach(T=>T.checked=T.value===b):Us(y.ref)?y.ref.value="":(y.ref.value=b,y.ref.type||h.values.next({name:d,values:{...n}})))}(p.shouldDirty||p.shouldTouch)&&We(d,b,p.shouldTouch,p.shouldDirty,!0),p.shouldValidate&&mt(d)},fe=(d,f,p)=>{for(const k in f){const b=f[k],y=`${d}.${k}`,T=v(s,y);(o.array.has(d)||!Qt(b)||T&&!T._f)&&!at(b)?fe(y,b,p):te(y,b,p)}},ue=(d,f,p={})=>{const k=v(s,d),b=o.array.has(d),y=ae(f);U(n,d,y),b?(h.array.next({name:d,values:{...n}}),(u.isDirty||u.dirtyFields)&&p.shouldDirty&&h.state.next({name:d,dirtyFields:Mt(i,n),isDirty:I(d,y)})):k&&!k._f&&!ie(y)?fe(d,y,p):te(d,y,p),ir(d,o)&&h.state.next({...t}),h.values.next({name:a.mount?d:void 0,values:{...n}})},ft=async d=>{const f=d.target;let p=f.name,k=!0;const b=v(s,p),y=()=>f.type?vs(b._f):Cr(d),T=F=>{k=Number.isNaN(F)||F===v(n,p,F)};if(b){let F,Q;const oe=y(),Ke=d.type===Kt.BLUR||d.type===Kt.FOCUS_OUT,pi=!ji(b._f)&&!e.resolver&&!v(t.errors,p)&&!b._f.deps||Ci(Ke,v(t.touchedFields,p),t.isSubmitted,_,m),ms=ir(p,o,Ke);U(n,p,oe),Ke?(b._f.onBlur&&b._f.onBlur(d),c&&c(0)):b._f.onChange&&b._f.onChange(d);const gs=We(p,oe,Ke,!1),mi=!he(gs)||ms;if(!Ke&&h.values.next({name:p,type:d.type,values:{...n}}),pi)return u.isValid&&$(),mi&&h.state.next({name:p,...ms?{}:gs});if(!Ke&&ms&&h.state.next({...t}),e.resolver){const{errors:tr}=await De([p]);if(T(oe),k){const gi=ur(t.errors,s,p),sr=ur(tr,s,gi.name||p);F=sr.error,p=sr.name,Q=he(tr)}}else J([p],!0),F=(await lr(b,n,S,e.shouldUseNativeValidation))[p],J([p]),T(oe),k&&(F?Q=!1:u.isValid&&(Q=await le(s,!0)));k&&(b._f.deps&&mt(b._f.deps),Ut(p,Q,F,gs))}},pt=(d,f)=>{if(v(t.errors,f)&&d.focus)return d.focus(),1},mt=async(d,f={})=>{let p,k;const b=Ht(d);if(e.resolver){const y=await Ge(G(d)?d:b);p=he(y),k=d?!b.some(T=>v(y,T)):p}else d?(k=(await Promise.all(b.map(async y=>{const T=v(s,y);return await le(T&&T._f?{[y]:T}:T)}))).every(Boolean),!(!k&&!t.isValid)&&$()):k=p=await le(s);return h.state.next({...!ke(d)||u.isValid&&p!==t.isValid?{}:{name:d},...e.resolver||!d?{isValid:p}:{},errors:t.errors}),f.shouldFocus&&!k&&vt(s,pt,d?b:o.mount),k},Hs=d=>{const f={...i,...a.mount?n:{}};return G(d)?f:ke(d)?v(f,d):d.map(p=>v(f,p))},Ws=(d,f)=>({invalid:!!v((f||t).errors,d),isDirty:!!v((f||t).dirtyFields,d),isTouched:!!v((f||t).touchedFields,d),isValidating:!!v((f||t).validatingFields,d),error:v((f||t).errors,d)}),ui=d=>{d&&Ht(d).forEach(f=>ee(t.errors,f)),h.state.next({errors:d?t.errors:{}})},Gs=(d,f,p)=>{const k=(v(s,d,{_f:{}})._f||{}).ref;U(t.errors,d,{...f,ref:k}),h.state.next({name:d,errors:t.errors,isValid:!1}),p&&p.shouldFocus&&k&&k.focus&&k.focus()},di=(d,f)=>$e(d)?h.values.subscribe({next:p=>d(V(void 0,f),p)}):V(d,f,!0),fs=(d,f={})=>{for(const p of d?Ht(d):o.mount)o.mount.delete(p),o.array.delete(p),f.keepValue||(ee(s,p),ee(n,p)),!f.keepError&&ee(t.errors,p),!f.keepDirty&&ee(t.dirtyFields,p),!f.keepTouched&&ee(t.touchedFields,p),!f.keepIsValidating&&ee(t.validatingFields,p),!e.shouldUnregister&&!f.keepDefaultValue&&ee(i,p);h.values.next({values:{...n}}),h.state.next({...t,...f.keepDirty?{isDirty:I()}:{}}),!f.keepIsValid&&$()},Ks=({disabled:d,name:f,field:p,fields:k,value:b})=>{if(ge(d)){const y=d?void 0:G(b)?vs(p?p._f:v(k,f)._f):b;U(n,f,y),We(f,y,!1,!1,!0)}},ps=(d,f={})=>{let p=v(s,d);const k=ge(f.disabled);return U(s,d,{...p||{},_f:{...p&&p._f?p._f:{ref:{name:d}},name:d,mount:!0,...f}}),o.mount.add(d),p?Ks({field:p,disabled:f.disabled,name:d,value:f.value}):q(d,!0,f.value),{...k?{disabled:f.disabled}:{},...e.progressive?{required:!!f.required,min:gt(f.min),max:gt(f.max),minLength:gt(f.minLength),maxLength:gt(f.maxLength),pattern:gt(f.pattern)}:{},name:d,onChange:ft,onBlur:ft,ref:b=>{if(b){ps(d,f),p=v(s,d);const y=G(b.value)&&b.querySelectorAll&&b.querySelectorAll("input,select,textarea")[0]||b,T=Oi(y),F=p._f.refs||[];if(T?F.find(Q=>Q===y):y===p._f.ref)return;U(s,d,{_f:{...p._f,...T?{refs:[...F.filter(_s),y,...Array.isArray(v(i,d))?[{}]:[]],ref:{type:y.type,name:d}}:{ref:y}}}),q(d,!1,void 0,y)}else p=v(s,d,{}),p._f&&(p._f.mount=!1),(e.shouldUnregister||f.shouldUnregister)&&!(Rr(o.array,d)&&a.action)&&o.unMount.add(d)}}},Ys=()=>e.shouldFocusError&&vt(s,pt,o.mount),hi=d=>{ge(d)&&(h.state.next({disabled:d}),vt(s,(f,p)=>{let k=d;const b=v(s,p);b&&ge(b._f.disabled)&&(k||(k=b._f.disabled)),f.disabled=k},0,!1))},Xs=(d,f)=>async p=>{let k;p&&(p.preventDefault&&p.preventDefault(),p.persist&&p.persist());let b=ae(n);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:y,values:T}=await De();t.errors=y,b=T}else await le(s);if(ee(t.errors,"root"),he(t.errors)){h.state.next({errors:{}});try{await d(b,p)}catch(y){k=y}}else f&&await f({...t.errors},p),Ys(),setTimeout(Ys);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:he(t.errors)&&!k,submitCount:t.submitCount+1,errors:t.errors}),k)throw k},fi=(d,f={})=>{v(s,d)&&(G(f.defaultValue)?ue(d,ae(v(i,d))):(ue(d,f.defaultValue),U(i,d,ae(f.defaultValue))),f.keepTouched||ee(t.touchedFields,d),f.keepDirty||(ee(t.dirtyFields,d),t.isDirty=f.defaultValue?I(d,ae(v(i,d))):I()),f.keepError||(ee(t.errors,d),u.isValid&&$()),h.state.next({...t}))},Qs=(d,f={})=>{const p=d?ae(d):i,k=ae(p),b=he(d),y=b?i:k;if(f.keepDefaultValues||(i=p),!f.keepValues){if(f.keepDirtyValues)for(const T of o.mount)v(t.dirtyFields,T)?U(y,T,v(n,T)):ue(T,v(y,T));else{if(Ls&&G(d))for(const T of o.mount){const F=v(s,T);if(F&&F._f){const Q=Array.isArray(F._f.refs)?F._f.refs[0]:F._f.ref;if(Yt(Q)){const oe=Q.closest("form");if(oe){oe.reset();break}}}}s={}}n=r.shouldUnregister?f.keepDefaultValues?ae(i):{}:ae(y),h.array.next({values:{...y}}),h.values.next({values:{...y}})}o={mount:f.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!u.isValid||!!f.keepIsValid||!!f.keepDirtyValues,a.watch=!!r.shouldUnregister,h.state.next({submitCount:f.keepSubmitCount?t.submitCount:0,isDirty:b?!1:f.keepDirty?t.isDirty:!!(f.keepDefaultValues&&!Ze(d,i)),isSubmitted:f.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:b?[]:f.keepDirtyValues?f.keepDefaultValues&&n?Mt(i,n):t.dirtyFields:f.keepDefaultValues&&d?Mt(i,d):{},touchedFields:f.keepTouched?t.touchedFields:{},errors:f.keepErrors?t.errors:{},isSubmitSuccessful:f.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},er=(d,f)=>Qs($e(d)?d(n):d,f);return{control:{register:ps,unregister:fs,getFieldState:Ws,handleSubmit:Xs,setError:Gs,_executeSchema:De,_getWatch:V,_getDirty:I,_updateValid:$,_removeUnmounted:Ft,_updateFieldArray:R,_updateDisabledField:Ks,_getFieldArray:Y,_reset:Qs,_resetDefaultValues:()=>$e(e.defaultValues)&&e.defaultValues().then(d=>{er(d,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:d=>{t={...t,...d}},_disableForm:hi,_subjects:h,_proxyFormState:u,_setErrors:B,get _fields(){return s},get _formValues(){return n},get _state(){return a},set _state(d){a=d},get _defaultValues(){return i},get _names(){return o},set _names(d){o=d},get _formState(){return t},set _formState(d){t=d},get _options(){return e},set _options(d){e={...e,...d}}},trigger:mt,register:ps,handleSubmit:Xs,watch:di,setValue:ue,getValues:Hs,reset:er,resetField:fi,clearErrors:ui,unregister:fs,setError:Gs,setFocus:(d,f={})=>{const p=v(s,d),k=p&&p._f;if(k){const b=k.refs?k.refs[0]:k.ref;b.focus&&(b.focus(),f.shouldSelect&&b.select())}},getFieldState:Ws}}function Zt(r={}){const e=Z.useRef(),t=Z.useRef(),[s,i]=Z.useState({isDirty:!1,isValidating:!1,isLoading:$e(r.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1,defaultValues:$e(r.defaultValues)?void 0:r.defaultValues});e.current||(e.current={...$i(r),formState:s});const n=e.current.control;return n._options=r,Ds({subject:n._subjects.state,next:a=>{Ir(a,n._proxyFormState,n._updateFormState,!0)&&i({...n._formState})}}),Z.useEffect(()=>n._disableForm(r.disabled),[n,r.disabled]),Z.useEffect(()=>{if(n._proxyFormState.isDirty){const a=n._getDirty();a!==s.isDirty&&n._subjects.state.next({isDirty:a})}},[n,s.isDirty]),Z.useEffect(()=>{r.values&&!Ze(r.values,t.current)?(n._reset(r.values,n._options.resetOptions),t.current=r.values,i(a=>({...a}))):n._resetDefaultValues()},[r.values,n]),Z.useEffect(()=>{r.errors&&n._setErrors(r.errors)},[r.errors,n]),Z.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),Z.useEffect(()=>{r.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})},[r.shouldUnregister,n]),e.current.formState=$r(s,n),e.current}var dr=function(r,e,t){if(r&&"reportValidity"in r){var s=v(t,e);r.setCustomValidity(s&&s.message||""),r.reportValidity()}},qr=function(r,e){var t=function(i){var n=e.fields[i];n&&n.ref&&"reportValidity"in n.ref?dr(n.ref,i,r):n.refs&&n.refs.forEach(function(a){return dr(a,i,r)})};for(var s in e.fields)t(s)},Ii=function(r,e){e.shouldUseNativeValidation&&qr(r,e);var t={};for(var s in r){var i=v(e.fields,s),n=Object.assign(r[s]||{},{ref:i&&i.ref});if(Li(e.names||Object.keys(r),s)){var a=Object.assign({},v(t,s));U(a,"root",n),U(t,s,a)}else U(t,s,n)}return t},Li=function(r,e){return r.some(function(t){return t.startsWith(e+".")})},Ni=function(r,e){for(var t={};r.length;){var s=r[0],i=s.code,n=s.message,a=s.path.join(".");if(!t[a])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];t[a]={message:o.message,type:o.code}}else t[a]={message:n,type:i};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return r.push(h)})}),e){var c=t[a].types,l=c&&c[s.code];t[a]=Vr(a,e,t,i,l?[].concat(l,s.message):s.message)}r.shift()}return t},Bt=function(r,e,t){return t===void 0&&(t={}),function(s,i,n){try{return Promise.resolve(function(a,o){try{var c=Promise.resolve(r[t.mode==="sync"?"parse":"parseAsync"](s,e)).then(function(l){return n.shouldUseNativeValidation&&qr({},n),{errors:{},values:t.raw?s:l}})}catch(l){return o(l)}return c&&c.then?c.then(void 0,o):c}(0,function(a){if(function(o){return o.errors!=null}(a))return{values:{},errors:Ii(Ni(a.errors,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw a}))}catch(a){return Promise.reject(a)}}},D;(function(r){r.assertEqual=i=>i;function e(i){}r.assertIs=e;function t(i){throw new Error}r.assertNever=t,r.arrayToEnum=i=>{const n={};for(const a of i)n[a]=a;return n},r.getValidEnumValues=i=>{const n=r.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of n)a[o]=i[o];return r.objectValues(a)},r.objectValues=i=>r.objectKeys(i).map(function(n){return i[n]}),r.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const n=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&n.push(a);return n},r.find=(i,n)=>{for(const a of i)if(n(a))return a},r.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function s(i,n=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(n)}r.joinValues=s,r.jsonStringifyReplacer=(i,n)=>typeof n=="bigint"?n.toString():n})(D||(D={}));var Os;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Os||(Os={}));const w=D.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Re=r=>{switch(typeof r){case"undefined":return w.undefined;case"string":return w.string;case"number":return isNaN(r)?w.nan:w.number;case"boolean":return w.boolean;case"function":return w.function;case"bigint":return w.bigint;case"symbol":return w.symbol;case"object":return Array.isArray(r)?w.array:r===null?w.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?w.promise:typeof Map<"u"&&r instanceof Map?w.map:typeof Set<"u"&&r instanceof Set?w.set:typeof Date<"u"&&r instanceof Date?w.date:w.object;default:return w.unknown}},g=D.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Di=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class ve extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(n){return n.message},s={_errors:[]},i=n=>{for(const a of n.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)s._errors.push(t(a));else{let o=s,c=0;for(;c<a.path.length;){const l=a.path[c];c===a.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(a))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return i(this),s}toString(){return this.message}get message(){return JSON.stringify(this.issues,D.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):s.push(e(i));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}ve.create=r=>new ve(r);const kt=(r,e)=>{let t;switch(r.code){case g.invalid_type:r.received===w.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case g.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,D.jsonStringifyReplacer)}`;break;case g.unrecognized_keys:t=`Unrecognized key(s) in object: ${D.joinValues(r.keys,", ")}`;break;case g.invalid_union:t="Invalid input";break;case g.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${D.joinValues(r.options)}`;break;case g.invalid_enum_value:t=`Invalid enum value. Expected ${D.joinValues(r.options)}, received '${r.received}'`;break;case g.invalid_arguments:t="Invalid function arguments";break;case g.invalid_return_type:t="Invalid function return type";break;case g.invalid_date:t="Invalid date";break;case g.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:D.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case g.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case g.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case g.custom:t="Invalid input";break;case g.invalid_intersection_types:t="Intersection results could not be merged";break;case g.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case g.not_finite:t="Number must be finite";break;default:t=e.defaultError,D.assertNever(r)}return{message:t}};let Jr=kt;function Vi(r){Jr=r}function ts(){return Jr}const ss=r=>{const{data:e,path:t,errorMaps:s,issueData:i}=r,n=[...t,...i.path||[]],a={...i,path:n};let o="";const c=s.filter(l=>!!l).slice().reverse();for(const l of c)o=l(a,{data:e,defaultError:o}).message;return{...i,path:n,message:i.message||o}},Ui=[];function x(r,e){const t=ss({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ts(),kt].filter(s=>!!s)});r.common.issues.push(t)}class re{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const i of t){if(i.status==="aborted")return j;i.status==="dirty"&&e.dirty(),s.push(i.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const i of t)s.push({key:await i.key,value:await i.value});return re.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const i of t){const{key:n,value:a}=i;if(n.status==="aborted"||a.status==="aborted")return j;n.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),n.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(s[n.value]=a.value)}return{status:e.value,value:s}}}const j=Object.freeze({status:"aborted"}),Hr=r=>({status:"dirty",value:r}),ne=r=>({status:"valid",value:r}),As=r=>r.status==="aborted",js=r=>r.status==="dirty",xt=r=>r.status==="valid",rs=r=>typeof Promise<"u"&&r instanceof Promise;var E;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(E||(E={}));class Se{constructor(e,t,s,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const hr=(r,e)=>{if(xt(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ve(r.common.issues);return this._error=t,this._error}}};function C(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:i}=r;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:s??o.defaultError}:{message:t??o.defaultError},description:i}}class P{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Re(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Re(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new re,ctx:{common:e.parent.common,data:e.data,parsedType:Re(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(rs(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const i={common:{issues:[],async:(s=t==null?void 0:t.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Re(e)},n=this._parseSync({data:e,path:i.path,parent:i});return hr(i,n)}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Re(e)},i=this._parse({data:e,path:s.path,parent:s}),n=await(rs(i)?i:Promise.resolve(i));return hr(s,n)}refine(e,t){const s=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,n)=>{const a=e(i),o=()=>n.addIssue({code:g.custom,...s(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,i)=>e(s)?!0:(i.addIssue(typeof t=="function"?t(s,i):t),!1))}_refinement(e){return new we({schema:this,typeName:O.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ae.create(this,this._def)}nullable(){return Je.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return be.create(this,this._def)}promise(){return ut.create(this,this._def)}or(e){return Ot.create([this,e],this._def)}and(e){return At.create(this,e,this._def)}transform(e){return new we({...C(this._def),schema:this,typeName:O.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new $t({...C(this._def),innerType:this,defaultValue:t,typeName:O.ZodDefault})}brand(){return new Gr({typeName:O.ZodBranded,type:this,...C(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new os({...C(this._def),innerType:this,catchValue:t,typeName:O.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Dt.create(this,e)}readonly(){return ls.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Fi=/^c[^\s-]{8,}$/i,Mi=/^[a-z][a-z0-9]*$/,Zi=/^[0-9A-HJKMNP-TV-Z]{26}$/,Bi=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,zi=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,qi="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let bs;const Ji=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Hi=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Wi=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Gi(r,e){return!!((e==="v4"||!e)&&Ji.test(r)||(e==="v6"||!e)&&Hi.test(r))}class _e extends P{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==w.string){const n=this._getOrReturnCtx(e);return x(n,{code:g.invalid_type,expected:w.string,received:n.parsedType}),j}const s=new re;let i;for(const n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(i=this._getOrReturnCtx(e,i),x(i,{code:g.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="max")e.data.length>n.value&&(i=this._getOrReturnCtx(e,i),x(i,{code:g.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="length"){const a=e.data.length>n.value,o=e.data.length<n.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?x(i,{code:g.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):o&&x(i,{code:g.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),s.dirty())}else if(n.kind==="email")zi.test(e.data)||(i=this._getOrReturnCtx(e,i),x(i,{validation:"email",code:g.invalid_string,message:n.message}),s.dirty());else if(n.kind==="emoji")bs||(bs=new RegExp(qi,"u")),bs.test(e.data)||(i=this._getOrReturnCtx(e,i),x(i,{validation:"emoji",code:g.invalid_string,message:n.message}),s.dirty());else if(n.kind==="uuid")Bi.test(e.data)||(i=this._getOrReturnCtx(e,i),x(i,{validation:"uuid",code:g.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid")Fi.test(e.data)||(i=this._getOrReturnCtx(e,i),x(i,{validation:"cuid",code:g.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid2")Mi.test(e.data)||(i=this._getOrReturnCtx(e,i),x(i,{validation:"cuid2",code:g.invalid_string,message:n.message}),s.dirty());else if(n.kind==="ulid")Zi.test(e.data)||(i=this._getOrReturnCtx(e,i),x(i,{validation:"ulid",code:g.invalid_string,message:n.message}),s.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),x(i,{validation:"url",code:g.invalid_string,message:n.message}),s.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),x(i,{validation:"regex",code:g.invalid_string,message:n.message}),s.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(i=this._getOrReturnCtx(e,i),x(i,{code:g.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),s.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(i=this._getOrReturnCtx(e,i),x(i,{code:g.invalid_string,validation:{startsWith:n.value},message:n.message}),s.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(i=this._getOrReturnCtx(e,i),x(i,{code:g.invalid_string,validation:{endsWith:n.value},message:n.message}),s.dirty()):n.kind==="datetime"?Wi(n).test(e.data)||(i=this._getOrReturnCtx(e,i),x(i,{code:g.invalid_string,validation:"datetime",message:n.message}),s.dirty()):n.kind==="ip"?Gi(e.data,n.version)||(i=this._getOrReturnCtx(e,i),x(i,{validation:"ip",code:g.invalid_string,message:n.message}),s.dirty()):D.assertNever(n);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(i=>e.test(i),{validation:t,code:g.invalid_string,...E.errToObj(s)})}_addCheck(e){return new _e({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...E.errToObj(e)})}url(e){return this._addCheck({kind:"url",...E.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...E.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...E.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...E.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...E.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...E.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...E.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...E.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...E.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...E.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...E.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...E.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...E.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...E.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...E.errToObj(t)})}nonempty(e){return this.min(1,E.errToObj(e))}trim(){return new _e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}_e.create=r=>{var e;return new _e({checks:[],typeName:O.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...C(r)})};function Ki(r,e){const t=(r.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,i=t>s?t:s,n=parseInt(r.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return n%a/Math.pow(10,i)}class Ie extends P{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==w.number){const n=this._getOrReturnCtx(e);return x(n,{code:g.invalid_type,expected:w.number,received:n.parsedType}),j}let s;const i=new re;for(const n of this._def.checks)n.kind==="int"?D.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{code:g.invalid_type,expected:"integer",received:"float",message:n.message}),i.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),x(s,{code:g.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),i.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),x(s,{code:g.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),i.dirty()):n.kind==="multipleOf"?Ki(e.data,n.value)!==0&&(s=this._getOrReturnCtx(e,s),x(s,{code:g.not_multiple_of,multipleOf:n.value,message:n.message}),i.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{code:g.not_finite,message:n.message}),i.dirty()):D.assertNever(n);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,E.toString(t))}gt(e,t){return this.setLimit("min",e,!1,E.toString(t))}lte(e,t){return this.setLimit("max",e,!0,E.toString(t))}lt(e,t){return this.setLimit("max",e,!1,E.toString(t))}setLimit(e,t,s,i){return new Ie({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:E.toString(i)}]})}_addCheck(e){return new Ie({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:E.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:E.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:E.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:E.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:E.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:E.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:E.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:E.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:E.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&D.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ie.create=r=>new Ie({checks:[],typeName:O.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...C(r)});class Le extends P{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==w.bigint){const n=this._getOrReturnCtx(e);return x(n,{code:g.invalid_type,expected:w.bigint,received:n.parsedType}),j}let s;const i=new re;for(const n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),x(s,{code:g.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),x(s,{code:g.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),x(s,{code:g.not_multiple_of,multipleOf:n.value,message:n.message}),i.dirty()):D.assertNever(n);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,E.toString(t))}gt(e,t){return this.setLimit("min",e,!1,E.toString(t))}lte(e,t){return this.setLimit("max",e,!0,E.toString(t))}lt(e,t){return this.setLimit("max",e,!1,E.toString(t))}setLimit(e,t,s,i){return new Le({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:E.toString(i)}]})}_addCheck(e){return new Le({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:E.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:E.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:E.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:E.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:E.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Le.create=r=>{var e;return new Le({checks:[],typeName:O.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...C(r)})};class St extends P{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==w.boolean){const s=this._getOrReturnCtx(e);return x(s,{code:g.invalid_type,expected:w.boolean,received:s.parsedType}),j}return ne(e.data)}}St.create=r=>new St({typeName:O.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...C(r)});class ze extends P{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==w.date){const n=this._getOrReturnCtx(e);return x(n,{code:g.invalid_type,expected:w.date,received:n.parsedType}),j}if(isNaN(e.data.getTime())){const n=this._getOrReturnCtx(e);return x(n,{code:g.invalid_date}),j}const s=new re;let i;for(const n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(i=this._getOrReturnCtx(e,i),x(i,{code:g.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),s.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(i=this._getOrReturnCtx(e,i),x(i,{code:g.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),s.dirty()):D.assertNever(n);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ze({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:E.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:E.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}ze.create=r=>new ze({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:O.ZodDate,...C(r)});class is extends P{_parse(e){if(this._getType(e)!==w.symbol){const s=this._getOrReturnCtx(e);return x(s,{code:g.invalid_type,expected:w.symbol,received:s.parsedType}),j}return ne(e.data)}}is.create=r=>new is({typeName:O.ZodSymbol,...C(r)});class Tt extends P{_parse(e){if(this._getType(e)!==w.undefined){const s=this._getOrReturnCtx(e);return x(s,{code:g.invalid_type,expected:w.undefined,received:s.parsedType}),j}return ne(e.data)}}Tt.create=r=>new Tt({typeName:O.ZodUndefined,...C(r)});class Et extends P{_parse(e){if(this._getType(e)!==w.null){const s=this._getOrReturnCtx(e);return x(s,{code:g.invalid_type,expected:w.null,received:s.parsedType}),j}return ne(e.data)}}Et.create=r=>new Et({typeName:O.ZodNull,...C(r)});class lt extends P{constructor(){super(...arguments),this._any=!0}_parse(e){return ne(e.data)}}lt.create=r=>new lt({typeName:O.ZodAny,...C(r)});class Be extends P{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ne(e.data)}}Be.create=r=>new Be({typeName:O.ZodUnknown,...C(r)});class je extends P{_parse(e){const t=this._getOrReturnCtx(e);return x(t,{code:g.invalid_type,expected:w.never,received:t.parsedType}),j}}je.create=r=>new je({typeName:O.ZodNever,...C(r)});class ns extends P{_parse(e){if(this._getType(e)!==w.undefined){const s=this._getOrReturnCtx(e);return x(s,{code:g.invalid_type,expected:w.void,received:s.parsedType}),j}return ne(e.data)}}ns.create=r=>new ns({typeName:O.ZodVoid,...C(r)});class be extends P{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),i=this._def;if(t.parsedType!==w.array)return x(t,{code:g.invalid_type,expected:w.array,received:t.parsedType}),j;if(i.exactLength!==null){const a=t.data.length>i.exactLength.value,o=t.data.length<i.exactLength.value;(a||o)&&(x(t,{code:a?g.too_big:g.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(x(t,{code:g.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(x(t,{code:g.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>i.type._parseAsync(new Se(t,a,t.path,o)))).then(a=>re.mergeArray(s,a));const n=[...t.data].map((a,o)=>i.type._parseSync(new Se(t,a,t.path,o)));return re.mergeArray(s,n)}get element(){return this._def.type}min(e,t){return new be({...this._def,minLength:{value:e,message:E.toString(t)}})}max(e,t){return new be({...this._def,maxLength:{value:e,message:E.toString(t)}})}length(e,t){return new be({...this._def,exactLength:{value:e,message:E.toString(t)}})}nonempty(e){return this.min(1,e)}}be.create=(r,e)=>new be({type:r,minLength:null,maxLength:null,exactLength:null,typeName:O.ZodArray,...C(e)});function rt(r){if(r instanceof W){const e={};for(const t in r.shape){const s=r.shape[t];e[t]=Ae.create(rt(s))}return new W({...r._def,shape:()=>e})}else return r instanceof be?new be({...r._def,type:rt(r.element)}):r instanceof Ae?Ae.create(rt(r.unwrap())):r instanceof Je?Je.create(rt(r.unwrap())):r instanceof Te?Te.create(r.items.map(e=>rt(e))):r}class W extends P{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=D.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==w.object){const l=this._getOrReturnCtx(e);return x(l,{code:g.invalid_type,expected:w.object,received:l.parsedType}),j}const{status:s,ctx:i}=this._processInputParams(e),{shape:n,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof je&&this._def.unknownKeys==="strip"))for(const l in i.data)a.includes(l)||o.push(l);const c=[];for(const l of a){const u=n[l],h=i.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Se(i,h,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof je){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(l==="strict")o.length>0&&(x(i,{code:g.unrecognized_keys,keys:o}),s.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of o){const h=i.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Se(i,h,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const h=await u.key;l.push({key:h,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>re.mergeObjectSync(s,l)):re.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(e){return E.errToObj,new W({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var i,n,a,o;const c=(a=(n=(i=this._def).errorMap)===null||n===void 0?void 0:n.call(i,t,s).message)!==null&&a!==void 0?a:s.defaultError;return t.code==="unrecognized_keys"?{message:(o=E.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new W({...this._def,unknownKeys:"strip"})}passthrough(){return new W({...this._def,unknownKeys:"passthrough"})}extend(e){return new W({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new W({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:O.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new W({...this._def,catchall:e})}pick(e){const t={};return D.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new W({...this._def,shape:()=>t})}omit(e){const t={};return D.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new W({...this._def,shape:()=>t})}deepPartial(){return rt(this)}partial(e){const t={};return D.objectKeys(this.shape).forEach(s=>{const i=this.shape[s];e&&!e[s]?t[s]=i:t[s]=i.optional()}),new W({...this._def,shape:()=>t})}required(e){const t={};return D.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof Ae;)n=n._def.innerType;t[s]=n}}),new W({...this._def,shape:()=>t})}keyof(){return Wr(D.objectKeys(this.shape))}}W.create=(r,e)=>new W({shape:()=>r,unknownKeys:"strip",catchall:je.create(),typeName:O.ZodObject,...C(e)});W.strictCreate=(r,e)=>new W({shape:()=>r,unknownKeys:"strict",catchall:je.create(),typeName:O.ZodObject,...C(e)});W.lazycreate=(r,e)=>new W({shape:r,unknownKeys:"strip",catchall:je.create(),typeName:O.ZodObject,...C(e)});class Ot extends P{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function i(n){for(const o of n)if(o.result.status==="valid")return o.result;for(const o of n)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const a=n.map(o=>new ve(o.ctx.common.issues));return x(t,{code:g.invalid_union,unionErrors:a}),j}if(t.common.async)return Promise.all(s.map(async n=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await n._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(i);{let n;const a=[];for(const c of s){const l={...t,common:{...t.common,issues:[]},parent:null},u=c._parseSync({data:t.data,path:t.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!n&&(n={result:u,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(n)return t.common.issues.push(...n.ctx.common.issues),n.result;const o=a.map(c=>new ve(c));return x(t,{code:g.invalid_union,unionErrors:o}),j}}get options(){return this._def.options}}Ot.create=(r,e)=>new Ot({options:r,typeName:O.ZodUnion,...C(e)});const Gt=r=>r instanceof Ct?Gt(r.schema):r instanceof we?Gt(r.innerType()):r instanceof Rt?[r.value]:r instanceof Ne?r.options:r instanceof Pt?Object.keys(r.enum):r instanceof $t?Gt(r._def.innerType):r instanceof Tt?[void 0]:r instanceof Et?[null]:null;class us extends P{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==w.object)return x(t,{code:g.invalid_type,expected:w.object,received:t.parsedType}),j;const s=this.discriminator,i=t.data[s],n=this.optionsMap.get(i);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(x(t,{code:g.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),j)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const i=new Map;for(const n of t){const a=Gt(n.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,n)}}return new us({typeName:O.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...C(s)})}}function Cs(r,e){const t=Re(r),s=Re(e);if(r===e)return{valid:!0,data:r};if(t===w.object&&s===w.object){const i=D.objectKeys(e),n=D.objectKeys(r).filter(o=>i.indexOf(o)!==-1),a={...r,...e};for(const o of n){const c=Cs(r[o],e[o]);if(!c.valid)return{valid:!1};a[o]=c.data}return{valid:!0,data:a}}else if(t===w.array&&s===w.array){if(r.length!==e.length)return{valid:!1};const i=[];for(let n=0;n<r.length;n++){const a=r[n],o=e[n],c=Cs(a,o);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return t===w.date&&s===w.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class At extends P{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=(n,a)=>{if(As(n)||As(a))return j;const o=Cs(n.value,a.value);return o.valid?((js(n)||js(a))&&t.dirty(),{status:t.value,value:o.data}):(x(s,{code:g.invalid_intersection_types}),j)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([n,a])=>i(n,a)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}At.create=(r,e,t)=>new At({left:r,right:e,typeName:O.ZodIntersection,...C(t)});class Te extends P{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==w.array)return x(s,{code:g.invalid_type,expected:w.array,received:s.parsedType}),j;if(s.data.length<this._def.items.length)return x(s,{code:g.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),j;!this._def.rest&&s.data.length>this._def.items.length&&(x(s,{code:g.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...s.data].map((a,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Se(s,a,s.path,o)):null}).filter(a=>!!a);return s.common.async?Promise.all(n).then(a=>re.mergeArray(t,a)):re.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new Te({...this._def,rest:e})}}Te.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Te({items:r,typeName:O.ZodTuple,rest:null,...C(e)})};class jt extends P{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==w.object)return x(s,{code:g.invalid_type,expected:w.object,received:s.parsedType}),j;const i=[],n=this._def.keyType,a=this._def.valueType;for(const o in s.data)i.push({key:n._parse(new Se(s,o,s.path,o)),value:a._parse(new Se(s,s.data[o],s.path,o))});return s.common.async?re.mergeObjectAsync(t,i):re.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof P?new jt({keyType:e,valueType:t,typeName:O.ZodRecord,...C(s)}):new jt({keyType:_e.create(),valueType:e,typeName:O.ZodRecord,...C(t)})}}class as extends P{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==w.map)return x(s,{code:g.invalid_type,expected:w.map,received:s.parsedType}),j;const i=this._def.keyType,n=this._def.valueType,a=[...s.data.entries()].map(([o,c],l)=>({key:i._parse(new Se(s,o,s.path,[l,"key"])),value:n._parse(new Se(s,c,s.path,[l,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of a){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return j;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(l.value,u.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const c of a){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return j;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(l.value,u.value)}return{status:t.value,value:o}}}}as.create=(r,e,t)=>new as({valueType:e,keyType:r,typeName:O.ZodMap,...C(t)});class qe extends P{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==w.set)return x(s,{code:g.invalid_type,expected:w.set,received:s.parsedType}),j;const i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(x(s,{code:g.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(x(s,{code:g.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const n=this._def.valueType;function a(c){const l=new Set;for(const u of c){if(u.status==="aborted")return j;u.status==="dirty"&&t.dirty(),l.add(u.value)}return{status:t.value,value:l}}const o=[...s.data.values()].map((c,l)=>n._parse(new Se(s,c,s.path,l)));return s.common.async?Promise.all(o).then(c=>a(c)):a(o)}min(e,t){return new qe({...this._def,minSize:{value:e,message:E.toString(t)}})}max(e,t){return new qe({...this._def,maxSize:{value:e,message:E.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}qe.create=(r,e)=>new qe({valueType:r,minSize:null,maxSize:null,typeName:O.ZodSet,...C(e)});class ot extends P{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==w.function)return x(t,{code:g.invalid_type,expected:w.function,received:t.parsedType}),j;function s(o,c){return ss({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ts(),kt].filter(l=>!!l),issueData:{code:g.invalid_arguments,argumentsError:c}})}function i(o,c){return ss({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ts(),kt].filter(l=>!!l),issueData:{code:g.invalid_return_type,returnTypeError:c}})}const n={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof ut){const o=this;return ne(async function(...c){const l=new ve([]),u=await o._def.args.parseAsync(c,n).catch(_=>{throw l.addIssue(s(c,_)),l}),h=await Reflect.apply(a,this,u);return await o._def.returns._def.type.parseAsync(h,n).catch(_=>{throw l.addIssue(i(h,_)),l})})}else{const o=this;return ne(function(...c){const l=o._def.args.safeParse(c,n);if(!l.success)throw new ve([s(c,l.error)]);const u=Reflect.apply(a,this,l.data),h=o._def.returns.safeParse(u,n);if(!h.success)throw new ve([i(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ot({...this._def,args:Te.create(e).rest(Be.create())})}returns(e){return new ot({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new ot({args:e||Te.create([]).rest(Be.create()),returns:t||Be.create(),typeName:O.ZodFunction,...C(s)})}}class Ct extends P{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Ct.create=(r,e)=>new Ct({getter:r,typeName:O.ZodLazy,...C(e)});class Rt extends P{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return x(t,{received:t.data,code:g.invalid_literal,expected:this._def.value}),j}return{status:"valid",value:e.data}}get value(){return this._def.value}}Rt.create=(r,e)=>new Rt({value:r,typeName:O.ZodLiteral,...C(e)});function Wr(r,e){return new Ne({values:r,typeName:O.ZodEnum,...C(e)})}class Ne extends P{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return x(t,{expected:D.joinValues(s),received:t.parsedType,code:g.invalid_type}),j}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),s=this._def.values;return x(t,{received:t.data,code:g.invalid_enum_value,options:s}),j}return ne(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return Ne.create(e)}exclude(e){return Ne.create(this.options.filter(t=>!e.includes(t)))}}Ne.create=Wr;class Pt extends P{_parse(e){const t=D.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==w.string&&s.parsedType!==w.number){const i=D.objectValues(t);return x(s,{expected:D.joinValues(i),received:s.parsedType,code:g.invalid_type}),j}if(t.indexOf(e.data)===-1){const i=D.objectValues(t);return x(s,{received:s.data,code:g.invalid_enum_value,options:i}),j}return ne(e.data)}get enum(){return this._def.values}}Pt.create=(r,e)=>new Pt({values:r,typeName:O.ZodNativeEnum,...C(e)});class ut extends P{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==w.promise&&t.common.async===!1)return x(t,{code:g.invalid_type,expected:w.promise,received:t.parsedType}),j;const s=t.parsedType===w.promise?t.data:Promise.resolve(t.data);return ne(s.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ut.create=(r,e)=>new ut({type:r,typeName:O.ZodPromise,...C(e)});class we extends P{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===O.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=this._def.effect||null,n={addIssue:a=>{x(s,a),a.fatal?t.abort():t.dirty()},get path(){return s.path}};if(n.addIssue=n.addIssue.bind(n),i.type==="preprocess"){const a=i.transform(s.data,n);return s.common.issues.length?{status:"dirty",value:s.data}:s.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:s.path,parent:s})):this._def.schema._parseSync({data:a,path:s.path,parent:s})}if(i.type==="refinement"){const a=o=>{const c=i.refinement(o,n);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?j:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?j:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(i.type==="transform")if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!xt(a))return a;const o=i.transform(a.value,n);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>xt(a)?Promise.resolve(i.transform(a.value,n)).then(o=>({status:t.value,value:o})):a);D.assertNever(i)}}we.create=(r,e,t)=>new we({schema:r,typeName:O.ZodEffects,effect:e,...C(t)});we.createWithPreprocess=(r,e,t)=>new we({schema:e,effect:{type:"preprocess",transform:r},typeName:O.ZodEffects,...C(t)});class Ae extends P{_parse(e){return this._getType(e)===w.undefined?ne(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ae.create=(r,e)=>new Ae({innerType:r,typeName:O.ZodOptional,...C(e)});class Je extends P{_parse(e){return this._getType(e)===w.null?ne(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Je.create=(r,e)=>new Je({innerType:r,typeName:O.ZodNullable,...C(e)});class $t extends P{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===w.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}$t.create=(r,e)=>new $t({innerType:r,typeName:O.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...C(e)});class os extends P{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return rs(i)?i.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new ve(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ve(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}os.create=(r,e)=>new os({innerType:r,typeName:O.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...C(e)});class cs extends P{_parse(e){if(this._getType(e)!==w.nan){const s=this._getOrReturnCtx(e);return x(s,{code:g.invalid_type,expected:w.nan,received:s.parsedType}),j}return{status:"valid",value:e.data}}}cs.create=r=>new cs({typeName:O.ZodNaN,...C(r)});const Yi=Symbol("zod_brand");class Gr extends P{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Dt extends P{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?j:n.status==="dirty"?(t.dirty(),Hr(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{const i=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?j:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:s.path,parent:s})}}static create(e,t){return new Dt({in:e,out:t,typeName:O.ZodPipeline})}}class ls extends P{_parse(e){const t=this._def.innerType._parse(e);return xt(t)&&(t.value=Object.freeze(t.value)),t}}ls.create=(r,e)=>new ls({innerType:r,typeName:O.ZodReadonly,...C(e)});const Kr=(r,e={},t)=>r?lt.create().superRefine((s,i)=>{var n,a;if(!r(s)){const o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,c=(a=(n=o.fatal)!==null&&n!==void 0?n:t)!==null&&a!==void 0?a:!0,l=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...l,fatal:c})}}):lt.create(),Xi={object:W.lazycreate};var O;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(O||(O={}));const Qi=(r,e={message:`Input not instance of ${r.name}`})=>Kr(t=>t instanceof r,e),Yr=_e.create,Xr=Ie.create,en=cs.create,tn=Le.create,Qr=St.create,sn=ze.create,rn=is.create,nn=Tt.create,an=Et.create,on=lt.create,cn=Be.create,ln=je.create,un=ns.create,dn=be.create,hn=W.create,fn=W.strictCreate,pn=Ot.create,mn=us.create,gn=At.create,yn=Te.create,_n=jt.create,vn=as.create,bn=qe.create,wn=ot.create,kn=Ct.create,xn=Rt.create,Sn=Ne.create,Tn=Pt.create,En=ut.create,fr=we.create,On=Ae.create,An=Je.create,jn=we.createWithPreprocess,Cn=Dt.create,Rn=()=>Yr().optional(),Pn=()=>Xr().optional(),$n=()=>Qr().optional(),In={string:r=>_e.create({...r,coerce:!0}),number:r=>Ie.create({...r,coerce:!0}),boolean:r=>St.create({...r,coerce:!0}),bigint:r=>Le.create({...r,coerce:!0}),date:r=>ze.create({...r,coerce:!0})},Ln=j;var H=Object.freeze({__proto__:null,defaultErrorMap:kt,setErrorMap:Vi,getErrorMap:ts,makeIssue:ss,EMPTY_PATH:Ui,addIssueToContext:x,ParseStatus:re,INVALID:j,DIRTY:Hr,OK:ne,isAborted:As,isDirty:js,isValid:xt,isAsync:rs,get util(){return D},get objectUtil(){return Os},ZodParsedType:w,getParsedType:Re,ZodType:P,ZodString:_e,ZodNumber:Ie,ZodBigInt:Le,ZodBoolean:St,ZodDate:ze,ZodSymbol:is,ZodUndefined:Tt,ZodNull:Et,ZodAny:lt,ZodUnknown:Be,ZodNever:je,ZodVoid:ns,ZodArray:be,ZodObject:W,ZodUnion:Ot,ZodDiscriminatedUnion:us,ZodIntersection:At,ZodTuple:Te,ZodRecord:jt,ZodMap:as,ZodSet:qe,ZodFunction:ot,ZodLazy:Ct,ZodLiteral:Rt,ZodEnum:Ne,ZodNativeEnum:Pt,ZodPromise:ut,ZodEffects:we,ZodTransformer:we,ZodOptional:Ae,ZodNullable:Je,ZodDefault:$t,ZodCatch:os,ZodNaN:cs,BRAND:Yi,ZodBranded:Gr,ZodPipeline:Dt,ZodReadonly:ls,custom:Kr,Schema:P,ZodSchema:P,late:Xi,get ZodFirstPartyTypeKind(){return O},coerce:In,any:on,array:dn,bigint:tn,boolean:Qr,date:sn,discriminatedUnion:mn,effect:fr,enum:Sn,function:wn,instanceof:Qi,intersection:gn,lazy:kn,literal:xn,map:vn,nan:en,nativeEnum:Tn,never:ln,null:an,nullable:An,number:Xr,object:hn,oboolean:$n,onumber:Pn,optional:On,ostring:Rn,pipeline:Cn,preprocess:jn,promise:En,record:_n,set:bn,strictObject:fn,string:Yr,symbol:rn,transformer:fr,tuple:yn,undefined:nn,union:pn,unknown:cn,void:un,NEVER:Ln,ZodIssueCode:g,quotelessJson:Di,ZodError:ve});const Nn=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>xe(()=>Promise.resolve().then(()=>Vt),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Ms extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Dn extends Ms{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Vn extends Ms{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Un extends Ms{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fn=function(r,e,t,s){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{l(s.next(u))}catch(h){a(h)}}function c(u){try{l(s.throw(u))}catch(h){a(h)}}function l(u){u.done?n(u.value):i(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};class Mn{constructor(e,{headers:t={},customFetch:s}={}){this.url=e,this.headers=t,this.fetch=Nn(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Fn(this,void 0,void 0,function*(){try{const{headers:i,method:n,body:a}=t;let o={},c;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(o["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(o["Content-Type"]="application/json",c=JSON.stringify(a)));const l=yield this.fetch(`${this.url}/${e}`,{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:c}).catch(_=>{throw new Dn(_)}),u=l.headers.get("x-relay-error");if(u&&u==="true")throw new Vn(l);if(!l.ok)throw new Un(l);let h=((s=l.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield l.json():h==="application/octet-stream"?m=yield l.blob():h==="multipart/form-data"?m=yield l.formData():m=yield l.text(),{data:m,error:null}}catch(i){return{data:null,error:i}}})}}var Zn=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},dt=Zn();const Bn=dt.fetch,Zs=dt.fetch.bind(dt),ei=dt.Headers,zn=dt.Request,qn=dt.Response,Vt=Object.freeze(Object.defineProperty({__proto__:null,Headers:ei,Request:zn,Response:qn,default:Zs,fetch:Bn},Symbol.toStringTag,{value:"Module"}));class Jn extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class Hn{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Zs:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let i=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async n=>{var a,o,c;let l=null,u=null,h=null,m=n.status,_=n.statusText;if(n.ok){if(this.method!=="HEAD"){const J=await n.text();J===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=J:u=JSON.parse(J))}const A=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),$=(o=n.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");A&&$&&$.length>1&&(h=parseInt($[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,m=406,_="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const A=await n.text();try{l=JSON.parse(A),Array.isArray(l)&&n.status===404&&(u=[],l=null,m=200,_="OK")}catch{n.status===404&&A===""?(m=204,_="No Content"):l={message:A}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,m=200,_="OK"),l&&this.shouldThrowOnError)throw new Jn(l)}return{error:l,data:u,count:h,status:m,statusText:_}});return this.shouldThrowOnError||(i=i.catch(n=>{var a,o,c;return{error:{message:`${(a=n==null?void 0:n.name)!==null&&a!==void 0?a:"FetchError"}: ${n==null?void 0:n.message}`,details:`${(o=n==null?void 0:n.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=n==null?void 0:n.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}}class Wn extends Hn{select(e){let t=!1;const s=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:i,referencedTable:n=i}={}){const a=n?`${n}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:i=s}={}){const n=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:i=!1,wal:n=!1,format:a="text"}={}){var o;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,i?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${l}"; options=${c};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class it extends Wn{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=t.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:i}={}){let n="";i==="plain"?n="pl":i==="phrase"?n="ph":i==="websearch"&&(n="w");const a=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${n}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const i=s?`${s}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}class Gn{constructor(e,{headers:t={},schema:s,fetch:i}){this.url=e,this.headers=t,this.schema=s,this.fetch=i}select(e,{head:t=!1,count:s}={}){const i=t?"HEAD":"GET";let n=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",a),s&&(this.headers.Prefer=`count=${s}`),new it({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const i="POST",n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),s||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const a=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(a.length>0){const o=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new it({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:i,defaultToNull:n=!0}={}){const a="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new it({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new it({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new it({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Kn="1.9.2",Yn={"X-Client-Info":`postgrest-js/${Kn}`};class Bs{constructor(e,{headers:t={},schema:s,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Yn),t),this.schemaName=s,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new Gn(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Bs(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,count:i}={}){let n;const a=new URL(`${this.url}/rpc/${e}`);let o;s?(n="HEAD",Object.entries(t).forEach(([l,u])=>{a.searchParams.append(l,`${u}`)})):(n="POST",o=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new it({method:n,url:a,headers:c,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}const Xn="2.9.3",Qn={"X-Client-Info":`realtime-js/${Xn}`},ea="1.0.0",ti=1e4,ta=1e3;var ct;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ct||(ct={}));var ce;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(ce||(ce={}));var me;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(me||(me={}));var Rs;(function(r){r.websocket="websocket"})(Rs||(Rs={}));var Me;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Me||(Me={}));class si{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class sa{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const i=t.getUint8(1),n=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=s.decode(e.slice(a,a+i));a=a+i;const c=s.decode(e.slice(a,a+n));a=a+n;const l=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:c,payload:l}}}class ws{constructor(e,t,s={},i=ti){this.channel=e,this.event=t,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var pr;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(pr||(pr={}));class bt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:n,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bt.syncState(this.state,i,n,a),this.pendingDiffs.forEach(c=>{this.state=bt.syncDiff(this.state,c,n,a)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},i=>{const{onJoin:n,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=bt.syncDiff(this.state,i,n,a),o())}),this.onJoin((i,n,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:n,newPresences:a})}),this.onLeave((i,n,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:n,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,i){const n=this.cloneDeep(e),a=this.transformState(t),o={},c={};return this.map(n,(l,u)=>{a[l]||(c[l]=u)}),this.map(a,(l,u)=>{const h=n[l];if(h){const m=u.map($=>$.presence_ref),_=h.map($=>$.presence_ref),S=u.filter($=>_.indexOf($.presence_ref)<0),A=h.filter($=>m.indexOf($.presence_ref)<0);S.length>0&&(o[l]=S),A.length>0&&(c[l]=A)}else o[l]=u}),this.syncDiff(n,{joins:o,leaves:c},s,i)}static syncDiff(e,t,s,i){const{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(n,(o,c)=>{var l;const u=(l=e[o])!==null&&l!==void 0?l:[];if(e[o]=this.cloneDeep(c),u.length>0){const h=e[o].map(_=>_.presence_ref),m=u.filter(_=>h.indexOf(_.presence_ref)<0);e[o].unshift(...m)}s(o,u,c)}),this.map(a,(o,c)=>{let l=e[o];if(!l)return;const u=c.map(h=>h.presence_ref);l=l.filter(h=>u.indexOf(h.presence_ref)<0),e[o]=l,i(o,l,c),l.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const i=e[s];return"metas"in i?t[s]=i.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):t[s]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var z;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(z||(z={}));const mr=(r,e,t={})=>{var s;const i=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((n,a)=>(n[a]=ra(a,r,e,i),n),{})},ra=(r,e,t,s)=>{const i=e.find(o=>o.name===r),n=i==null?void 0:i.type,a=t[r];return n&&!s.includes(n)?ri(n,a):Ps(a)},ri=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return oa(e,t)}switch(r){case z.bool:return ia(e);case z.float4:case z.float8:case z.int2:case z.int4:case z.int8:case z.numeric:case z.oid:return na(e);case z.json:case z.jsonb:return aa(e);case z.timestamp:return ca(e);case z.abstime:case z.date:case z.daterange:case z.int4range:case z.int8range:case z.money:case z.reltime:case z.text:case z.time:case z.timestamptz:case z.timetz:case z.tsrange:case z.tstzrange:return Ps(e);default:return Ps(e)}},Ps=r=>r,ia=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},na=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},aa=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},oa=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let n;const a=r.slice(1,t);try{n=JSON.parse("["+a+"]")}catch{n=a?a.split(","):[]}return n.map(o=>ri(e,o))}return r},ca=r=>typeof r=="string"?r.replace(" ","T"):r;var gr;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(gr||(gr={}));var yr;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes"})(yr||(yr={}));var _r;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(_r||(_r={}));class zs{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new ws(this,me.join,this.params,this.timeout),this.rejoinTimer=new si(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ce.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(me.reply,{},(i,n)=>{this._trigger(this._replyEventName(n),i)}),this.presence=new bt(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var s,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:n,presence:a}}=this.params;this._onError(l=>e&&e("CHANNEL_ERROR",l)),this._onClose(()=>e&&e("CLOSED"));const o={},c={broadcast:n,presence:a,postgres_changes:(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(l=>l.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:l})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),l===void 0){e&&e("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,m=(u=h==null?void 0:h.length)!==null&&u!==void 0?u:0,_=[];for(let S=0;S<m;S++){const A=h[S],{filter:{event:$,schema:J,table:R,filter:K}}=A,B=l&&l[S];if(B&&B.event===$&&B.schema===J&&B.table===R&&B.filter===K)_.push(Object.assign(Object.assign({},A),{id:B.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e("SUBSCRIBED");return}}).receive("error",l=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){const{event:n,payload:a}=e,o={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=t.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var a,o,c;const l=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&n("ok"),l.receive("ok",()=>n("ok")),l.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ce.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(me.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const i=new ws(this,me.leave,{},e);i.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,s){const i=new AbortController,n=setTimeout(()=>i.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(n),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ws(this,e,t,s);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var i,n;const a=e.toLocaleLowerCase(),{close:o,error:c,leave:l,join:u}=me;if(s&&[o,c,l,u].indexOf(a)>=0&&s!==this._joinRef())return;let m=this._onMessage(a,t,s);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(_=>{var S,A,$;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||(($=(A=_.filter)===null||A===void 0?void 0:A.event)===null||$===void 0?void 0:$.toLocaleLowerCase())===a}).map(_=>_.callback(m,s)):(n=this.bindings[a])===null||n===void 0||n.filter(_=>{var S,A,$,J,R,K;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in _){const B=_.id,q=(S=_.filter)===null||S===void 0?void 0:S.event;return B&&((A=t.ids)===null||A===void 0?void 0:A.includes(B))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===(($=t.data)===null||$===void 0?void 0:$.type.toLocaleLowerCase()))}else{const B=(R=(J=_==null?void 0:_.filter)===null||J===void 0?void 0:J.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return B==="*"||B===((K=t==null?void 0:t.event)===null||K===void 0?void 0:K.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===a}).map(_=>{if(typeof m=="object"&&"ids"in m){const S=m.data,{schema:A,table:$,commit_timestamp:J,type:R,errors:K}=S;m=Object.assign(Object.assign({},{schema:A,table:$,commit_timestamp:J,eventType:R,new:{},old:{},errors:K}),this._getPayloadRecords(S))}_.callback(m,s)})}_isClosed(){return this.state===ce.closed}_isJoined(){return this.state===ce.joined}_isJoining(){return this.state===ce.joining}_isLeaving(){return this.state===ce.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const i=e.toLocaleLowerCase(),n={type:i,filter:t,callback:s};return this.bindings[i]?this.bindings[i].push(n):this.bindings[i]=[n],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(i=>{var n;return!(((n=i.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===s&&zs.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(me.close,{},e)}_onError(e){this._on(me.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ce.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=mr(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=mr(e.columns,e.old_record)),t}}const la=()=>{},ua=typeof WebSocket<"u";class da{constructor(e,t){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Qn,this.params={},this.timeout=ti,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=la,this.conn=null,this.sendBuffer=[],this.serializer=new sa,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=n=>{let a;return n?a=n:typeof fetch>"u"?a=(...o)=>xe(()=>Promise.resolve().then(()=>Vt),void 0).then(({default:c})=>c(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${Rs.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(n,a)=>a(JSON.stringify(n)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new si(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(ua){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new ha(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),xe(()=>import("./browser-CjDogl_J.js").then(e=>e.b),__vite__mapDeps([0,1,2])).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ct.connecting:return Me.Connecting;case ct.open:return Me.Open;case ct.closing:return Me.Closing;default:return Me.Closed}}isConnected(){return this.connectionState()===Me.Open}channel(e,t={config:{}}){const s=new zs(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:i,ref:n}=e,a=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${t} ${s} (${n})`,i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(me.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ea}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:i,payload:n,ref:a}=t;(a&&a===this.pendingHeartbeatRef||i===(n==null?void 0:n.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${s} ${i} ${a&&"("+a+")"||""}`,n),this.channels.filter(o=>o._isMember(s)).forEach(o=>o._trigger(i,n,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(me.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${s}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ta,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class ha{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ct.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class qs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function se(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class fa extends qs{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class vr extends qs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var pa=function(r,e,t,s){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{l(s.next(u))}catch(h){a(h)}}function c(u){try{l(s.throw(u))}catch(h){a(h)}}function l(u){u.done?n(u.value):i(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const ii=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>xe(()=>Promise.resolve().then(()=>Vt),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},ma=()=>pa(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xe(()=>Promise.resolve().then(()=>Vt),void 0)).Response:Response});var ht=function(r,e,t,s){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{l(s.next(u))}catch(h){a(h)}}function c(u){try{l(s.throw(u))}catch(h){a(h)}}function l(u){u.done?n(u.value):i(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const ks=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),ga=(r,e)=>ht(void 0,void 0,void 0,function*(){const t=yield ma();r instanceof t?r.json().then(s=>{e(new fa(ks(s),r.status||500))}).catch(s=>{e(new vr(ks(s),s))}):e(new vr(ks(r),r))}),ya=(r,e,t,s)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),t))};function ds(r,e,t,s,i,n){return ht(this,void 0,void 0,function*(){return new Promise((a,o)=>{r(t,ya(e,s,i,n)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>ga(c,o))})})}function $s(r,e,t,s){return ht(this,void 0,void 0,function*(){return ds(r,"GET",e,t,s)})}function Ce(r,e,t,s,i){return ht(this,void 0,void 0,function*(){return ds(r,"POST",e,s,i,t)})}function _a(r,e,t,s,i){return ht(this,void 0,void 0,function*(){return ds(r,"PUT",e,s,i,t)})}function ni(r,e,t,s,i){return ht(this,void 0,void 0,function*(){return ds(r,"DELETE",e,s,i,t)})}var de=function(r,e,t,s){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{l(s.next(u))}catch(h){a(h)}}function c(u){try{l(s.throw(u))}catch(h){a(h)}}function l(u){u.done?n(u.value):i(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const va={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},br={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ba{constructor(e,t={},s,i){this.url=e,this.headers=t,this.bucketId=s,this.fetch=ii(i)}uploadOrUpdate(e,t,s,i){return de(this,void 0,void 0,function*(){try{let n;const a=Object.assign(Object.assign({},br),i),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&s instanceof Blob?(n=new FormData,n.append("cacheControl",a.cacheControl),n.append("",s)):typeof FormData<"u"&&s instanceof FormData?(n=s,n.append("cacheControl",a.cacheControl)):(n=s,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);const c=this._removeEmptyFolders(t),l=this._getFinalPath(c),u=yield this.fetch(`${this.url}/object/${l}`,Object.assign({method:e,body:n,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),h=yield u.json();return u.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(n){if(se(n))return{data:null,error:n};throw n}})}upload(e,t,s){return de(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,i){return de(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),a=this._getFinalPath(n),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let c;const l=Object.assign({upsert:br.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",l.cacheControl)):(c=s,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:u}),m=yield h.json();return h.ok?{data:{path:n,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(se(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e){return de(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const s=yield Ce(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),i=new URL(this.url+s.url),n=i.searchParams.get("token");if(!n)throw new qs("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:n},error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}update(e,t,s){return de(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t){return de(this,void 0,void 0,function*(){try{return{data:yield Ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}})}copy(e,t){return de(this,void 0,void 0,function*(){try{return{data:{path:(yield Ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,s){return de(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),n=yield Ce(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${a}`)},{data:n,error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,s){return de(this,void 0,void 0,function*(){try{const i=yield Ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${n}`):null})),error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}})}download(e,t){return de(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield $s(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(se(o))return{data:null,error:o};throw o}})}getPublicUrl(e,t){const s=this._getFinalPath(e),i=[],n=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&i.push(n);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&i.push(c);let l=i.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${l}`)}}}remove(e){return de(this,void 0,void 0,function*(){try{return{data:yield ni(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}list(e,t,s){return de(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},va),t),{prefix:e||""});return{data:yield Ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const wa="2.5.5",ka={"X-Client-Info":`storage-js/${wa}`};var Xe=function(r,e,t,s){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{l(s.next(u))}catch(h){a(h)}}function c(u){try{l(s.throw(u))}catch(h){a(h)}}function l(u){u.done?n(u.value):i(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};class xa{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},ka),t),this.fetch=ii(s)}listBuckets(){return Xe(this,void 0,void 0,function*(){try{return{data:yield $s(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(se(e))return{data:null,error:e};throw e}})}getBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield $s(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Xe(this,void 0,void 0,function*(){try{return{data:yield Ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Xe(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield ni(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}}class Sa extends xa{constructor(e,t={},s){super(e,t,s)}from(e){return new ba(this.url,this.headers,e,this.fetch)}}const Ta="2.39.8";let _t="";typeof Deno<"u"?_t="deno":typeof document<"u"?_t="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_t="react-native":_t="node";const Ea={"X-Client-Info":`supabase-js-${_t}/${Ta}`},Oa={headers:Ea},Aa={schema:"public"},ja={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ca={};var Ra=function(r,e,t,s){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{l(s.next(u))}catch(h){a(h)}}function c(u){try{l(s.throw(u))}catch(h){a(h)}}function l(u){u.done?n(u.value):i(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const Pa=r=>{let e;return r?e=r:typeof fetch>"u"?e=Zs:e=fetch,(...t)=>e(...t)},$a=()=>typeof Headers>"u"?ei:Headers,Ia=(r,e,t)=>{const s=Pa(t),i=$a();return(n,a)=>Ra(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:r;let l=new i(a==null?void 0:a.headers);return l.has("apikey")||l.set("apikey",r),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),s(n,Object.assign(Object.assign({},a),{headers:l}))})};function La(r){return r.replace(/\/$/,"")}function Na(r,e){const{db:t,auth:s,realtime:i,global:n}=r,{db:a,auth:o,realtime:c,global:l}=e;return{db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),s),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},l),n)}}function Da(r){return Math.round(Date.now()/1e3)+r}function Va(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const pe=()=>typeof document<"u",Ve={tested:!1,writable:!1},wt=()=>{if(!pe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ve.tested)return Ve.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Ve.tested=!0,Ve.writable=!0}catch{Ve.tested=!0,Ve.writable=!1}return Ve.writable};function xs(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,n)=>{e[n]=i})}catch{}return t.searchParams.forEach((s,i)=>{e[i]=s}),e}const ai=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>xe(()=>Promise.resolve().then(()=>Vt),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Ua=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Ue=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},zt=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ss=async(r,e)=>{await r.removeItem(e)};function Fa(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,i,n,a,o,c,l,u=0;for(r=r.replace("-","+").replace("_","/");u<r.length;)a=e.indexOf(r.charAt(u++)),o=e.indexOf(r.charAt(u++)),c=e.indexOf(r.charAt(u++)),l=e.indexOf(r.charAt(u++)),s=a<<2|o>>4,i=(o&15)<<4|c>>2,n=(c&3)<<6|l,t=t+String.fromCharCode(s),c!=64&&i!=0&&(t=t+String.fromCharCode(i)),l!=64&&n!=0&&(t=t+String.fromCharCode(n));return t}class hs{constructor(){this.promise=new hs.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}hs.promiseConstructor=Promise;function wr(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(Fa(s))}async function Ma(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Za(r,e){return new Promise((s,i)=>{(async()=>{for(let n=0;n<1/0;n++)try{const a=await r(n);if(!e(n,null,a)){s(a);return}}catch(a){if(!e(n,a)){i(a);return}}})()})}function Ba(r){return("0"+r.toString(16)).substr(-2)}function Qe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let i="";for(let n=0;n<56;n++)i+=t.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(e),Array.from(e,Ba).join("")}async function za(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(s);return Array.from(i).map(n=>String.fromCharCode(n)).join("")}function qa(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function et(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await za(r);return qa(t)}class Js extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function L(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Ja extends Js{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function Ha(r){return L(r)&&r.name==="AuthApiError"}class oi extends Js{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class He extends Js{constructor(e,t,s){super(e),this.name=t,this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class tt extends He{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Ts extends He{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class qt extends He{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Jt extends He{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kr extends He{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Is extends He{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function Es(r){return L(r)&&r.name==="AuthRetryableFetchError"}class Wa extends He{constructor(e,t,s){super(e,"AuthWeakPasswordError",t),this.reasons=s}}var Ga=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(r);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(r,s[i])&&(t[s[i]]=r[s[i]]);return t};const nt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Ka=[502,503,504];async function xr(r){if(!Ua(r))throw new Is(nt(r),0);if(Ka.includes(r.status))throw new Is(nt(r),r.status);let e;try{e=await r.json()}catch(t){throw new oi(nt(t),t)}throw typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)?new Wa(nt(e),r.status,e.weak_password.reasons):new Ja(nt(e),r.status||500)}const Ya=(r,e,t,s)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),t))};async function N(r,e,t,s){var i;const n=Object.assign({},s==null?void 0:s.headers);s!=null&&s.jwt&&(n.Authorization=`Bearer ${s.jwt}`);const a=(i=s==null?void 0:s.query)!==null&&i!==void 0?i:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Xa(r,e,t+o,{headers:n,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Xa(r,e,t,s,i,n){const a=Ya(e,s,i,n);let o;try{o=await r(t,a)}catch(c){throw console.error(c),new Is(nt(c),0)}if(o.ok||await xr(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(c){await xr(c)}}function Fe(r){var e;let t=null;so(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Da(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function Sr(r){const e=Fe(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Pe(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Qa(r){return{data:r,error:null}}function eo(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:i,verification_type:n}=r,a=Ga(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:s,redirect_to:i,verification_type:n},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function to(r){return r}function so(r){return r.access_token&&r.refresh_token&&r.expires_in}var ro=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(r);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(r,s[i])&&(t[s[i]]=r[s[i]]);return t};class io{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=ai(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await N(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(L(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await N(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Pe})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=ro(e,["options"]),i=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(i.new_email=s==null?void 0:s.newEmail,delete i.newEmail),await N(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:eo,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(L(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await N(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Pe})}catch(t){if(L(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,i,n,a,o,c;try{const l={nextPage:null,lastPage:0,total:0},u=await N(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(n=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&n!==void 0?n:""},xform:to});if(u.error)throw u.error;const h=await u.json(),m=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,_=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return _.length>0&&(_.forEach(S=>{const A=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),$=JSON.parse(S.split(";")[1].split("=")[1]);l[`${$}Page`]=A}),l.total=parseInt(m)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(L(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await N(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Pe})}catch(t){if(L(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await N(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Pe})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await N(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Pe})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await N(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:s}}catch(t){if(L(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await N(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(L(t))return{data:null,error:t};throw t}}}const ci="0.0.0",no="http://localhost:9999",ao="supabase.auth.token",oo={"X-Client-Info":`gotrue-js/${ci}`},Tr=10,co={getItem:r=>wt()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{wt()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{wt()&&globalThis.localStorage.removeItem(r)}};function Er(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function lo(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const st={debug:!!(globalThis&&wt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class li extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class uo extends li{}async function ho(r,e,t){st.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),st.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){st.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{st.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw st.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new uo(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(st.debug)try{const n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}lo();const fo={url:no,storageKey:ao,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oo,flowType:"implicit",debug:!1},yt=30*1e3,Or=3;async function Ar(r,e,t){return await t()}class It{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=It.nextInstanceID,It.nextInstanceID+=1,this.instanceID>0&&pe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},fo),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new io({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ai(i.fetch),this.lock=i.lock||Ar,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,i.lock?this.lock=i.lock:pe()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ho:this.lock=Ar,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:wt()?this.storage=co:(this.memoryStorage={},this.storage=Er(this.memoryStorage)):(this.memoryStorage={},this.storage=Er(this.memoryStorage)),pe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ci}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=pe()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),(s==null?void 0:s.message)==="Identity is already linked"||(s==null?void 0:s.message)==="Identity is already linked to another user"?{error:s}:(await this._removeSession(),{error:s});const{session:i,redirectType:n}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",n),await this._saveSession(i),setTimeout(async()=>{n==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return L(e)?{error:e}:{error:new oi("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,s,i;try{await this._removeSession();let n;if("email"in e){const{email:u,password:h,options:m}=e;let _=null,S=null;if(this.flowType==="pkce"){const A=Qe();await Ue(this.storage,`${this.storageKey}-code-verifier`,A),_=await et(A),S=A===_?"plain":"s256"}n=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:_,code_challenge_method:S},xform:Fe})}else if("phone"in e){const{phone:u,password:h,options:m}=e;n=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Fe})}else throw new qt("You must provide either an email or phone number and a password");const{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(n){if(L(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:n,password:a,options:o}=e;t=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Sr})}else if("phone"in e){const{phone:n,password:a,options:o}=e;t=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Sr})}else throw new qt("You must provide either an email or phone number and a password");const{data:s,error:i}=t;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ts}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(t){if(L(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,i,n;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await zt(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(t??"").split("/"),{data:n,error:a}=await N(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Fe});return await Ss(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new Ts}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:i??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:i,access_token:n,nonce:a}=e,o=await N(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Fe}),{data:c,error:l}=o;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ts}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(t){if(L(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,i,n,a;try{if(await this._removeSession(),"email"in e){const{email:o,options:c}=e;let l=null,u=null;if(this.flowType==="pkce"){const m=Qe();await Ue(this.storage,`${this.storageKey}-code-verifier`,m),l=await et(m),u=m===l?"plain":"s256"}const{error:h}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:c}=e,{data:l,error:u}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new qt("You must provide either an email or phone number.")}catch(o){if(L(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let i,n;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,n=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:o}=await N(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:i,xform:Fe});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,l=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(L(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,s,i;try{await this._removeSession();let n=null,a=null;if(this.flowType==="pkce"){const o=Qe();await Ue(this.storage,`${this.storageKey}-code-verifier`,o),n=await et(o),a=o===n?"plain":"s256"}return await N(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:Qa})}catch(n){if(L(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new tt;const{error:i}=await N(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(L(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:i,options:n}=e,{error:a}=await N(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},redirectTo:n==null?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:i,options:n}=e,{data:a,error:o}=await N(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new qt("You must provide either an email or phone number and a type")}catch(t){if(L(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await zt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s)return{data:{session:e},error:null};const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Pe}):await this._useSession(async t=>{var s,i;const{data:n,error:a}=t;if(a)throw a;return await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=n.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Pe})})}catch(t){if(L(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:i,error:n}=s;if(n)throw n;if(!i.session)throw new tt;const a=i.session;let o=null,c=null;if(this.flowType==="pkce"&&e.email!=null){const h=Qe();await Ue(this.storage,`${this.storageKey}-code-verifier`,h),o=await et(h),c=h===o?"plain":"s256"}const{data:l,error:u}=await N(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:Pe});if(u)throw u;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return wr(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new tt;const t=Date.now()/1e3;let s=t,i=!0,n=null;const a=wr(e.access_token);if(a.exp&&(s=a.exp,i=s<=t),i){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};n=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;n={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(L(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new tt;const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(L(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!pe())throw new Jt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Jt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new kr("Not a valid PKCE flow url.");const t=xs(window.location.href);if(e){if(!t.code)throw new kr("No code detected.");const{data:R,error:K}=await this._exchangeCodeForSession(t.code);if(K)throw K;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:R.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Jt(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:i,access_token:n,refresh_token:a,expires_in:o,expires_at:c,token_type:l}=t;if(!n||!o||!a||!l)throw new Jt("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let m=u+h;c&&(m=parseInt(c));const _=m-u;_*1e3<=yt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${h}s`);const S=m-h;u-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,m,u):u-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",S,m,u);const{data:A,error:$}=await this._getUser(n);if($)throw $;const J={provider_token:s,provider_refresh_token:i,access_token:n,expires_in:h,expires_at:m,refresh_token:a,token_type:l,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:J,redirectType:t.type},error:null}}catch(t){if(L(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=xs(window.location.href);return!!(pe()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=xs(window.location.href),t=await zt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:i,error:n}=t;if(n)return{error:n};const a=(s=i.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Ha(o)&&(o.status===404||o.status===401)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Ss(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=Va(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,i;try{const{data:{session:n},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,t={}){let s=null,i=null;if(this.flowType==="pkce"){const n=Qe();await Ue(this.storage,`${this.storageKey}-code-verifier`,`${n}/PASSWORD_RECOVERY`),s=await et(n),i=n===s?"plain":"s256"}try{return await N(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(L(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(L(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:i}=await this._useSession(async n=>{var a,o,c,l,u;const{data:h,error:m}=n;if(m)throw m;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await N(this.fetch,"GET",_,{headers:this.headers,jwt:(u=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return pe()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(L(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,i;const{data:n,error:a}=t;if(a)throw a;return await N(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=n.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(L(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Za(async i=>(await Ma(i*200),this._debug(t,"refreshing attempt",i),await N(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Fe})),(i,n,a)=>a&&a.error&&Es(a.error)&&Date.now()+(i+1)*200-s<yt)}catch(s){if(this._debug(t,"error",s),L(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),pe()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await zt(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<i+Tr;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${Tr}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Es(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new tt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new hs;const{data:n,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!n.session)throw new tt;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const o={session:n.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(n){if(this._debug(i,"error",n),L(n)){const a={session:null,error:n};return Es(n)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(n),n}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,s=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(c){n.push(c)}});if(await Promise.all(a),n.length>0){for(let o=0;o<n.length;o+=1)console.error(n[o]);throw n[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await Ue(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ss(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-e)/yt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${yt}ms, refresh threshold is ${Or} ticks`),i<=Or&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof li)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const i=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const n=Qe();await Ue(this.storage,`${this.storageKey}-code-verifier`,n);const a=await et(n),o=n===a?"plain":"s256";this._debug("PKCE","code verifier",`${n.substring(0,5)}...`,"code challenge",a,"method",o);const c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(c.toString())}if(s!=null&&s.queryParams){const n=new URLSearchParams(s.queryParams);i.push(n.toString())}return s!=null&&s.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:i,error:n}=t;return n?{data:null,error:n}:await N(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(L(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,i;const{data:n,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:c}=await N(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(!((i=o==null?void 0:o.totp)===null||i===void 0)&&i.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(L(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:i,error:n}=t;if(n)return{data:null,error:n};const{data:a,error:o}=await N(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(L(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:i,error:n}=t;return n?{data:null,error:n}:await N(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(L(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],i=s.filter(n=>n.factor_type==="totp"&&n.status==="verified");return{data:{all:s,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:i},error:n}=e;if(n)return{data:null,error:n};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let o=null;a.aal&&(o=a.aal);let c=o;((s=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}}It.nextInstanceID=0;class po extends It{constructor(e){super(e)}}var mo=function(r,e,t,s){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(u){try{l(s.next(u))}catch(h){a(h)}}function c(u){try{l(s.throw(u))}catch(h){a(h)}}function l(u){u.done?n(u.value):i(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};class go{constructor(e,t,s){var i,n,a,o,c,l,u,h;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const m=La(e);this.realtimeUrl=`${m}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${m}/auth/v1`,this.storageUrl=`${m}/storage/v1`,this.functionsUrl=`${m}/functions/v1`;const _=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,S={db:Aa,realtime:Ca,auth:Object.assign(Object.assign({},ja),{storageKey:_}),global:Oa},A=Na(s??{},S);this.storageKey=(n=(i=A.auth)===null||i===void 0?void 0:i.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=(a=A.global)===null||a===void 0?void 0:a.headers)!==null&&o!==void 0?o:{},this.auth=this._initSupabaseAuthClient((c=A.auth)!==null&&c!==void 0?c:{},this.headers,(l=A.global)===null||l===void 0?void 0:l.fetch),this.fetch=Ia(t,this._getAccessToken.bind(this),(u=A.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},A.realtime)),this.rest=new Bs(`${m}/rest/v1`,{headers:this.headers,schema:(h=A.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Mn(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Sa(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return mo(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,storageKey:n,flowType:a,debug:o},c,l){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new po({url:this.authUrl,headers:Object.assign(Object.assign({},u),c),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,flowType:a,debug:o,fetch:l})}_initRealtimeClient(e){return new da(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const yo=(r,e,t)=>new go(r,e,t),_o="https://framuuwxbqdypbbirhoz.supabase.co",vo="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyYW11dXd4YnFkeXBiYmlyaG96Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTEwNjA3NzEsImV4cCI6MjAyNjYzNjc3MX0.XwQsrRL-gd1tqCm-dMYmXxXpCR-RIOQBw_C9exL-bOY",bo=yo(_o,vo),wo=Oe.lazy(()=>xe(()=>import("./InsurentInfo-CYEhGivt.js"),__vite__mapDeps([3,1,2,4,5,6,7]))),ko=Oe.lazy(()=>xe(()=>import("./InsurentPartnerProfile-DuhqSn2D.js"),__vite__mapDeps([8,1,2,9,4,6,7]))),xo=Oe.lazy(()=>xe(()=>import("./InsurentProfile-BPE18hWv.js"),__vite__mapDeps([10,1,2,9,4,7,5]))),So=Oe.lazy(()=>xe(()=>import("./InsuranceMemebers-DtyCijto.js"),__vite__mapDeps([11,1,2,4,5]))),To=H.object({insurentCivilite:H.enum(["Madame","Monsieur"]),insurentFName:H.string().min(6,{message:"Le prnom doit comporter au moins 6 caractres"}),insurentLName:H.string().min(6,{message:"Le nom doit comporter au moins 6 caractres"}),insurentBirth:H.date().refine(r=>!isNaN(r.getTime()),{message:"Veuillez saisir une date valide."}),insurentAddress:H.string().min(10,{message:"L'addresse doit comporter au moins 6 caractres"}),insurentPostalCode:H.string().min(3,{message:"Veuillez saisir un code postal valide."}),insurentCity:H.string().min(3,{message:"La ville doit comporter au moins 3 caractres"}),insurentPhone:H.string().refine(r=>/^\+?\d{1,3}[- ]?\d{2}[- ]?\d{2}[- ]?\d{2}[- ]?\d{2}$/.test(r),{message:"Numro de tlphone est invalide"}),insurentEmail:H.string().email({message:"Veuillez saisir un email valide."}),alreadyInsurenced:H.enum(["oui","non"])}),Eo=H.object({partnerCivilite:H.enum(["Madame","Monsieur"]),partnerBirth:H.date().refine(r=>!isNaN(r.getTime()),{message:"Veuillez saisir une date valide."}),partnerSocialRegime:H.enum(["Gnral","Travailleur non salari","Agricole","Alsace-Moselle"]),partnerProfission:H.enum(["Employ / Ouvrier","Cadre","Commerant","Fonctionnaire","Retrait","Agriculteur","Chef d'entreprise","Profession librale","Etudiant","Sans profession","Recherche d'emploi"])}),Oo=H.object({socialRegime:H.enum(["Gnral","Travailleur non salari","Agricole","Alsace-Moselle"]),profission:H.enum(["Employ / Ouvrier","Cadre","Commerant","Fonctionnaire","Retrait","Agriculteur","Chef d'entreprise","Profession librale","Etudiant","Sans profession","Recherche d'emploi"]),secteurActivite:H.string().min(2,{message:"Le secteur doit comporter au moin 2 caractres"})}),Ao=H.object({insuredAdultes:H.string().min(0,{message:"Veuillez saisir un nombre valide."}),insuredChildren:H.string().min(0,{message:"Veuillez saisir un nombre valide."})});function jo(){const r=Zt({resolver:Bt(To),defaultValues:{insurentFName:"",insurentLName:"",insurentBirth:new Date,insurentAddress:"",insurentCity:"",insurentEmail:"",insurentPhone:"",insurentPostalCode:"",insurentCivilite:"Monsieur",alreadyInsurenced:"non"}}),e=Zt({resolver:Bt(Eo),defaultValues:{partnerBirth:new Date,partnerProfission:"Agriculteur",partnerCivilite:"Madame",partnerSocialRegime:"Agricole"}}),t=Zt({resolver:Bt(Oo),defaultValues:{profission:"Agriculteur",secteurActivite:"",socialRegime:"Agricole"}}),s=Zt({resolver:Bt(Ao),defaultValues:{insuredAdultes:"1",insuredChildren:"1"}}),[i,n]=Oe.useState([]),[a,o]=Oe.useState(0),[c,l]=Oe.useState("stail"),[u]=Oe.useState([M.jsx(wo,{insurentInfoForm:r,handleSubmit:m}),M.jsx(xo,{insurentProfileForm:t,handleSubmit:m,handlePrevious:h}),M.jsx(ko,{insurentPartnerInfoForm:e,handleSubmit:m,handlePrevious:h}),M.jsx(So,{insurentsForm:s,handleSubmit:m,handlePrevious:h})]);Oe.useEffect(()=>{async function _(){l("pending");const{data:S,error:A}=await bo.from("clients").insert(i).select();if(A)throw A;return S}a===4&&_().then(()=>l("success")).catch(()=>l("error"))},[a,i]);function h(){o(_=>_===0?0:_-1)}function m(_){n(S=>({...S,..._})),o(S=>S+1)}return M.jsxs("div",{className:"md:flex md:justify-center md:items-center",children:[c==="pending"&&M.jsx("div",{className:"md:w-1/2 bg-slate-200 sm:px-20 px-5 py-10 sm:rounded-md animate-pulse h-44"}),c==="success"&&M.jsxs("div",{className:"md:w-1/2 bg-slate-200 sm:px-20 px-5 py-10 sm:rounded-md h-screen flex flex-col gap-5 items-center justify-center",children:[M.jsx("div",{children:M.jsx(_i,{className:"size-20 text-green-600"})}),M.jsx("div",{className:"text-3xl text-center",children:"Votre demande a t bien enregistre"})]}),a<=3&&M.jsxs("div",{className:"md:w-1/2 bg-slate-200 sm:px-20 px-5 py-10 bg-opacity-40 sm:bg-opacity-70 sm:rounded-md",children:[M.jsxs("div",{className:"flex justify-between items-center mb-4 border-2 border-dashed divide-x-2 divide-dashed divide-slate-400 border-slate-400",children:[M.jsxs("div",{className:`${a===0||a===1?"bg-blue-400 text-slate-300":"bg-slate-200 text-slate-400"} flex-1 text-center py-2 text-2xl font-semibold`,children:[M.jsx("span",{className:"hidden md:block",children:"Mon Profile"}),M.jsx("span",{className:"block md:hidden",children:"1"})]}),M.jsxs("div",{className:`${a===2?"bg-blue-400 text-slate-300":"bg-slate-200 text-slate-400"} flex-1 text-center py-2 text-2xl font-semibold`,children:[M.jsx("span",{className:"hidden md:block",children:"Mon Partenaire Profile"}),M.jsx("span",{className:"block md:hidden",children:"2"})]}),M.jsxs("div",{className:`${a===3?"bg-blue-400 text-slate-300":"bg-slate-200 text-slate-400"} flex-1 text-center py-2 text-2xl font-semibold`,children:[M.jsx("span",{className:"hidden md:block",children:"Mes Assurentes"}),M.jsx("span",{className:"block md:hidden",children:"3"})]})]}),Object.keys(r.formState.errors).length>0&&M.jsx("ul",{className:"bg-red-300 text-red-600 px-3 py-3 rounded mb-3",children:Object.values(r.formState.errors).map(_=>M.jsx("li",{className:"text-xs list-inside list-disc",children:_.message},_.message))}),Object.keys(t.formState.errors).length>0&&M.jsx("ul",{className:"bg-red-300 text-red-600 px-3 py-3 rounded mb-3",children:Object.values(t.formState.errors).map(_=>M.jsx("li",{className:"text-xs list-inside list-disc",children:_.message},_.message))}),Object.keys(e.formState.errors).length>0&&M.jsx("ul",{className:"bg-red-300 text-red-600 px-3 py-3 rounded mb-3",children:Object.values(e.formState.errors).map(_=>M.jsx("li",{className:"text-xs list-inside list-disc",children:_.message},_.message))}),Object.keys(s.formState.errors).length>0&&M.jsx("ul",{className:"bg-red-300 text-red-600 px-3 py-3 rounded mb-3",children:Object.values(s.formState.errors).map(_=>M.jsx("li",{className:"text-xs list-inside list-disc",children:_.message},_.message))}),u[a]]})]})}const No=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"}));export{Lo as C,Io as F,No as a,Ns as u};
